(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.BlockstoreS3 = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var BlockstoreS3=(()=>{var bd=Object.create;var Nt=Object.defineProperty;var gd=Object.getOwnPropertyDescriptor;var xd=Object.getOwnPropertyNames;var Cd=Object.getPrototypeOf,_d=Object.prototype.hasOwnProperty;var _=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),P=(e,t)=>{for(var r in t)Nt(e,r,{get:t[r],enumerable:!0})},Yo=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of xd(t))!_d.call(e,o)&&o!==r&&Nt(e,o,{get:()=>t[o],enumerable:!(n=gd(t,o))||n.enumerable});return e};var pe=(e,t,r)=>(r=e!=null?bd(Cd(e)):{},Yo(t||!e||!e.__esModule?Nt(r,"default",{value:e,enumerable:!0}):r,e)),Ed=e=>Yo(Nt({},"__esModule",{value:!0}),e);var dn=_((bC,jt)=>{var gs,xs,Cs,_s,Es,ps,Ss,ws,As,Kt,cn,Ts,Rs,Te,Bs,Os,ks,Is,Ps,Ds,Ns,vs,Ms;(function(e){var t=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){e(r(t,r(n)))}):typeof jt=="object"&&typeof jt.exports=="object"?e(r(t,r(jt.exports))):e(r(t));function r(n,o){return n!==t&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,a){return n[s]=o?o(s,a):a}}})(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])};gs=function(r,n){t(r,n);function o(){this.constructor=r}r.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)},xs=Object.assign||function(r){for(var n,o=1,s=arguments.length;o<s;o++){n=arguments[o];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},Cs=function(r,n){var o={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&n.indexOf(s)<0&&(o[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)n.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(o[s[a]]=r[s[a]]);return o},_s=function(r,n,o,s){var a=arguments.length,c=a<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,o):s,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(r,n,o,s);else for(var d=r.length-1;d>=0;d--)(i=r[d])&&(c=(a<3?i(c):a>3?i(n,o,c):i(n,o))||c);return a>3&&c&&Object.defineProperty(n,o,c),c},Es=function(r,n){return function(o,s){n(o,s,r)}},ps=function(r,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,n)},Ss=function(r,n,o,s){function a(c){return c instanceof o?c:new o(function(i){i(c)})}return new(o||(o=Promise))(function(c,i){function d(f){try{l(s.next(f))}catch(u){i(u)}}function y(f){try{l(s.throw(f))}catch(u){i(u)}}function l(f){f.done?c(f.value):a(f.value).then(d,y)}l((s=s.apply(r,n||[])).next())})},ws=function(r,n){var o={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,a,c,i;return i={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function d(l){return function(f){return y([l,f])}}function y(l){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,a&&(c=l[0]&2?a.return:l[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,l[1])).done)return c;switch(a=0,c&&(l=[l[0]&2,c.value]),l[0]){case 0:case 1:c=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,a=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(c=o.trys,!(c=c.length>0&&c[c.length-1])&&(l[0]===6||l[0]===2)){o=0;continue}if(l[0]===3&&(!c||l[1]>c[0]&&l[1]<c[3])){o.label=l[1];break}if(l[0]===6&&o.label<c[1]){o.label=c[1],c=l;break}if(c&&o.label<c[2]){o.label=c[2],o.ops.push(l);break}c[2]&&o.ops.pop(),o.trys.pop();continue}l=n.call(r,o)}catch(f){l=[6,f],a=0}finally{s=c=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Ms=function(r,n,o,s){s===void 0&&(s=o),r[s]=n[o]},As=function(r,n){for(var o in r)o!=="default"&&!n.hasOwnProperty(o)&&(n[o]=r[o])},Kt=function(r){var n=typeof Symbol=="function"&&Symbol.iterator,o=n&&r[n],s=0;if(o)return o.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},cn=function(r,n){var o=typeof Symbol=="function"&&r[Symbol.iterator];if(!o)return r;var s=o.call(r),a,c=[],i;try{for(;(n===void 0||n-- >0)&&!(a=s.next()).done;)c.push(a.value)}catch(d){i={error:d}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return c},Ts=function(){for(var r=[],n=0;n<arguments.length;n++)r=r.concat(cn(arguments[n]));return r},Rs=function(){for(var r=0,n=0,o=arguments.length;n<o;n++)r+=arguments[n].length;for(var s=Array(r),a=0,n=0;n<o;n++)for(var c=arguments[n],i=0,d=c.length;i<d;i++,a++)s[a]=c[i];return s},Te=function(r){return this instanceof Te?(this.v=r,this):new Te(r)},Bs=function(r,n,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=o.apply(r,n||[]),a,c=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(m){s[m]&&(a[m]=function(b){return new Promise(function(h,g){c.push([m,b,h,g])>1||d(m,b)})})}function d(m,b){try{y(s[m](b))}catch(h){u(c[0][3],h)}}function y(m){m.value instanceof Te?Promise.resolve(m.value.v).then(l,f):u(c[0][2],m)}function l(m){d("next",m)}function f(m){d("throw",m)}function u(m,b){m(b),c.shift(),c.length&&d(c[0][0],c[0][1])}},Os=function(r){var n,o;return n={},s("next"),s("throw",function(a){throw a}),s("return"),n[Symbol.iterator]=function(){return this},n;function s(a,c){n[a]=r[a]?function(i){return(o=!o)?{value:Te(r[a](i)),done:a==="return"}:c?c(i):i}:c}},ks=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],o;return n?n.call(r):(r=typeof Kt=="function"?Kt(r):r[Symbol.iterator](),o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o);function s(c){o[c]=r[c]&&function(i){return new Promise(function(d,y){i=r[c](i),a(d,y,i.done,i.value)})}}function a(c,i,d,y){Promise.resolve(y).then(function(l){c({value:l,done:d})},i)}},Is=function(r,n){return Object.defineProperty?Object.defineProperty(r,"raw",{value:n}):r.raw=n,r},Ps=function(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var o in r)Object.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n.default=r,n},Ds=function(r){return r&&r.__esModule?r:{default:r}},Ns=function(r,n){if(!n.has(r))throw new TypeError("attempted to get private field on non-instance");return n.get(r)},vs=function(r,n,o){if(!n.has(r))throw new TypeError("attempted to set private field on non-instance");return n.set(r,o),o},e("__extends",gs),e("__assign",xs),e("__rest",Cs),e("__decorate",_s),e("__param",Es),e("__metadata",ps),e("__awaiter",Ss),e("__generator",ws),e("__exportStar",As),e("__createBinding",Ms),e("__values",Kt),e("__read",cn),e("__spread",Ts),e("__spreadArrays",Rs),e("__await",Te),e("__asyncGenerator",Bs),e("__asyncDelegator",Os),e("__asyncValues",ks),e("__makeTemplateObject",Is),e("__importStar",Ps),e("__importDefault",Ds),e("__classPrivateFieldGet",Ns),e("__classPrivateFieldSet",vs)})});var Ls=_(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.toUtf8=Re.fromUtf8=void 0;var Jd=e=>{let t=[];for(let r=0,n=e.length;r<n;r++){let o=e.charCodeAt(r);if(o<128)t.push(o);else if(o<2048)t.push(o>>6|192,o&63|128);else if(r+1<e.length&&(o&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320){let s=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023);t.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else t.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(t)};Re.fromUtf8=Jd;var el=e=>{let t="";for(let r=0,n=e.length;r<n;r++){let o=e[r];if(o<128)t+=String.fromCharCode(o);else if(192<=o&&o<224){let s=e[++r];t+=String.fromCharCode((o&31)<<6|s&63)}else if(240<=o&&o<365){let a="%"+[o,e[++r],e[++r],e[++r]].map(c=>c.toString(16)).join("%");t+=decodeURIComponent(a)}else t+=String.fromCharCode((o&15)<<12|(e[++r]&63)<<6|e[++r]&63)}return t};Re.toUtf8=el});var Fs=_(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.toUtf8=Be.fromUtf8=void 0;function tl(e){return new TextEncoder().encode(e)}Be.fromUtf8=tl;function rl(e){return new TextDecoder("utf-8").decode(e)}Be.toUtf8=rl});var qs=_(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.toUtf8=Oe.fromUtf8=void 0;var Us=Ls(),$s=Fs(),nl=e=>typeof TextEncoder=="function"?(0,$s.fromUtf8)(e):(0,Us.fromUtf8)(e);Oe.fromUtf8=nl;var ol=e=>typeof TextDecoder=="function"?(0,$s.toUtf8)(e):(0,Us.toUtf8)(e);Oe.toUtf8=ol});var Ks=_(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.convertToBuffer=void 0;var sl=qs(),al=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:sl.fromUtf8;function cl(e){return e instanceof Uint8Array?e:typeof e=="string"?al(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}zt.convertToBuffer=cl});var js=_(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.isEmptyData=void 0;function il(e){return typeof e=="string"?e.length===0:e.byteLength===0}Gt.isEmptyData=il});var zs=_(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.numToUint8=void 0;function dl(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}Ht.numToUint8=dl});var Gs=_(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.uint32ArrayFrom=void 0;function ll(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}Vt.uint32ArrayFrom=ll});var ct=_(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.uint32ArrayFrom=K.numToUint8=K.isEmptyData=K.convertToBuffer=void 0;var fl=Ks();Object.defineProperty(K,"convertToBuffer",{enumerable:!0,get:function(){return fl.convertToBuffer}});var ml=js();Object.defineProperty(K,"isEmptyData",{enumerable:!0,get:function(){return ml.isEmptyData}});var yl=zs();Object.defineProperty(K,"numToUint8",{enumerable:!0,get:function(){return yl.numToUint8}});var ul=Gs();Object.defineProperty(K,"uint32ArrayFrom",{enumerable:!0,get:function(){return ul.uint32ArrayFrom}})});var Ys=_(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.AwsCrc32=void 0;var Hs=dn(),ln=ct(),Vs=it(),hl=function(){function e(){this.crc32=new Vs.Crc32}return e.prototype.update=function(t){(0,ln.isEmptyData)(t)||this.crc32.update((0,ln.convertToBuffer)(t))},e.prototype.digest=function(){return Hs.__awaiter(this,void 0,void 0,function(){return Hs.__generator(this,function(t){return[2,(0,ln.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new Vs.Crc32},e}();Yt.AwsCrc32=hl});var it=_(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.AwsCrc32=oe.Crc32=oe.crc32=void 0;var bl=dn(),gl=ct();function xl(e){return new Ws().update(e).digest()}oe.crc32=xl;var Ws=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=bl.__values(t),s=o.next();!s.done;s=o.next()){var a=s.value;this.checksum=this.checksum>>>8^_l[(this.checksum^a)&255]}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();oe.Crc32=Ws;var Cl=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],_l=(0,gl.uint32ArrayFrom)(Cl),El=Ys();Object.defineProperty(oe,"AwsCrc32",{enumerable:!0,get:function(){return El.AwsCrc32}})});var nr=_(X=>{"use strict";var Sa=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",of=Sa+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",wa="["+Sa+"]["+of+"]*",sf=new RegExp("^"+wa+"$"),af=function(e,t){let r=[],n=t.exec(e);for(;n;){let o=[];o.startIndex=t.lastIndex-n[0].length;let s=n.length;for(let a=0;a<s;a++)o.push(n[a]);r.push(o),n=t.exec(e)}return r},cf=function(e){let t=sf.exec(e);return!(t===null||typeof t>"u")};X.isExist=function(e){return typeof e<"u"};X.isEmptyObject=function(e){return Object.keys(e).length===0};X.merge=function(e,t,r){if(t){let n=Object.keys(t),o=n.length;for(let s=0;s<o;s++)r==="strict"?e[n[s]]=[t[n[s]]]:e[n[s]]=t[n[s]]}};X.getValue=function(e){return X.isExist(e)?e:""};X.isName=cf;X.getAllMatches=af;X.nameRegexp=wa});var Sn=_(Oa=>{"use strict";var pn=nr(),df={allowBooleanAttributes:!1,unpairedTags:[]};Oa.validate=function(e,t){t=Object.assign({},df,t);let r=[],n=!1,o=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=Ta(e,s),s.err)return s}else if(e[s]==="<"){let a=s;if(s++,e[s]==="!"){s=Ra(e,s);continue}else{let c=!1;e[s]==="/"&&(c=!0,s++);let i="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)i+=e[s];if(i=i.trim(),i[i.length-1]==="/"&&(i=i.substring(0,i.length-1),s--),!gf(i)){let l;return i.trim().length===0?l="Invalid space after '<'.":l="Tag '"+i+"' is an invalid name.",A("InvalidTag",l,I(e,s))}let d=mf(e,s);if(d===!1)return A("InvalidAttr","Attributes for '"+i+"' have open quote.",I(e,s));let y=d.value;if(s=d.index,y[y.length-1]==="/"){let l=s-y.length;y=y.substring(0,y.length-1);let f=Ba(y,t);if(f===!0)n=!0;else return A(f.err.code,f.err.msg,I(e,l+f.err.line))}else if(c)if(d.tagClosed){if(y.trim().length>0)return A("InvalidTag","Closing tag '"+i+"' can't have attributes or invalid starting.",I(e,a));{let l=r.pop();if(i!==l.tagName){let f=I(e,l.tagStartPos);return A("InvalidTag","Expected closing tag '"+l.tagName+"' (opened in line "+f.line+", col "+f.col+") instead of closing tag '"+i+"'.",I(e,a))}r.length==0&&(o=!0)}}else return A("InvalidTag","Closing tag '"+i+"' doesn't have proper closing.",I(e,s));else{let l=Ba(y,t);if(l!==!0)return A(l.err.code,l.err.msg,I(e,s-y.length+l.err.line));if(o===!0)return A("InvalidXml","Multiple possible root nodes found.",I(e,s));t.unpairedTags.indexOf(i)!==-1||r.push({tagName:i,tagStartPos:a}),n=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=Ra(e,s);continue}else if(e[s+1]==="?"){if(s=Ta(e,++s),s.err)return s}else break;else if(e[s]==="&"){let l=hf(e,s);if(l==-1)return A("InvalidChar","char '&' is not expected.",I(e,s));s=l}else if(o===!0&&!Aa(e[s]))return A("InvalidXml","Extra text at the end",I(e,s));e[s]==="<"&&s--}}else{if(Aa(e[s]))continue;return A("InvalidChar","char '"+e[s]+"' is not expected.",I(e,s))}if(n){if(r.length==1)return A("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",I(e,r[0].tagStartPos));if(r.length>0)return A("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return A("InvalidXml","Start tag expected.",1);return!0};function Aa(e){return e===" "||e==="	"||e===`
`||e==="\r"}function Ta(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return A("InvalidXml","XML declaration allowed only at the start of the document.",I(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function Ra(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var lf='"',ff="'";function mf(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if(e[t]===lf||e[t]===ff)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){o=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:o}}var yf=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Ba(e,t){let r=pn.getAllMatches(e,yf),n={};for(let o=0;o<r.length;o++){if(r[o][1].length===0)return A("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",ft(r[o]));if(r[o][3]!==void 0&&r[o][4]===void 0)return A("InvalidAttr","Attribute '"+r[o][2]+"' is without value.",ft(r[o]));if(r[o][3]===void 0&&!t.allowBooleanAttributes)return A("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",ft(r[o]));let s=r[o][2];if(!bf(s))return A("InvalidAttr","Attribute '"+s+"' is an invalid name.",ft(r[o]));if(!n.hasOwnProperty(s))n[s]=1;else return A("InvalidAttr","Attribute '"+s+"' is repeated.",ft(r[o]))}return!0}function uf(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function hf(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,uf(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function A(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function bf(e){return pn.isName(e)}function gf(e){return pn.isName(e)}function I(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function ft(e){return e.startIndex+e[1].length}});var Ia=_(wn=>{var ka={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},xf=function(e){return Object.assign({},ka,e)};wn.buildOptions=xf;wn.defaultOptions=ka});var Da=_((rA,Pa)=>{"use strict";var An=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}};Pa.exports=An});var va=_((nA,Na)=>{var Cf=nr();function _f(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,o=!1,s=!1,a="";for(;t<e.length;t++)if(e[t]==="<"&&!s){if(o&&Sf(e,t))t+=7,[entityName,val,t]=Ef(e,t+1),val.indexOf("&")===-1&&(r[Rf(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(o&&wf(e,t))t+=8;else if(o&&Af(e,t))t+=8;else if(o&&Tf(e,t))t+=9;else if(pf)s=!0;else throw new Error("Invalid DOCTYPE");n++,a=""}else if(e[t]===">"){if(s?e[t-1]==="-"&&e[t-2]==="-"&&(s=!1,n--):n--,n===0)break}else e[t]==="["?o=!0:a+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function Ef(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let n=e[t++],o="";for(;t<e.length&&e[t]!==n;t++)o+=e[t];return[r,o,t]}function pf(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function Sf(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function wf(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function Af(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function Tf(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function Rf(e){if(Cf.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}Na.exports=_f});var La=_((oA,Ma)=>{var Bf=/^[-+]?0x[a-fA-F0-9]+$/,Of=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var kf={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function If(e,t={}){if(t=Object.assign({},kf,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&Bf.test(r))return Number.parseInt(r,16);{let n=Of.exec(r);if(n){let o=n[1],s=n[2],a=Pf(n[3]),c=n[4]||n[6];if(!t.leadingZeros&&s.length>0&&o&&r[2]!==".")return e;if(!t.leadingZeros&&s.length>0&&!o&&r[1]!==".")return e;{let i=Number(r),d=""+i;return d.search(/[eE]/)!==-1||c?t.eNotation?i:e:r.indexOf(".")!==-1?d==="0"&&a===""||d===a||o&&d==="-"+a?i:e:s?a===d||o+a===d?i:e:r===d||r===o+d?i:e}}else return e}}function Pf(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}Ma.exports=If});var Ua=_((aA,Fa)=>{"use strict";var On=nr(),mt=Da(),Df=va(),Nf=La(),sA="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,On.nameRegexp),Tn=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=vf,this.parseXml=$f,this.parseTextData=Mf,this.resolveNameSpace=Lf,this.buildAttributesMap=Uf,this.isItStopNode=zf,this.replaceEntitiesValue=Kf,this.readStopNodeData=Hf,this.saveTextToParentTag=jf,this.addChild=qf}};function vf(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function Mf(e,t,r,n,o,s,a){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){a||(e=this.replaceEntitiesValue(e));let c=this.options.tagValueProcessor(t,e,r,o,s);return c==null?e:typeof c!=typeof e||c!==e?c:this.options.trimValues?Bn(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?Bn(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function Lf(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var Ff=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Uf(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){let n=On.getAllMatches(e,Ff),o=n.length,s={};for(let a=0;a<o;a++){let c=this.resolveNameSpace(n[a][1]),i=n[a][4],d=this.options.attributeNamePrefix+c;if(c.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),i!==void 0){this.options.trimValues&&(i=i.trim()),i=this.replaceEntitiesValue(i);let y=this.options.attributeValueProcessor(c,i,t);y==null?s[d]=i:typeof y!=typeof i||y!==i?s[d]=y:s[d]=Bn(i,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[d]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let a={};return a[this.options.attributesGroupName]=s,a}return s}}var $f=function(e){e=e.replace(/\r\n?/g,`
`);let t=new mt("!xml"),r=t,n="",o="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let c=ge(e,">",s,"Closing Tag is not closed."),i=e.substring(s+2,c).trim();if(this.options.removeNSPrefix){let l=i.indexOf(":");l!==-1&&(i=i.substr(l+1))}this.options.transformTagName&&(i=this.options.transformTagName(i)),r&&(n=this.saveTextToParentTag(n,r,o));let d=o.substring(o.lastIndexOf(".")+1);if(i&&this.options.unpairedTags.indexOf(i)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${i}>`);let y=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(y=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):y=o.lastIndexOf("."),o=o.substring(0,y),r=this.tagsNodeStack.pop(),n="",s=c}else if(e[s+1]==="?"){let c=Rn(e,s,!1,"?>");if(!c)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),!(this.options.ignoreDeclaration&&c.tagName==="?xml"||this.options.ignorePiTags)){let i=new mt(c.tagName);i.add(this.options.textNodeName,""),c.tagName!==c.tagExp&&c.attrExpPresent&&(i[":@"]=this.buildAttributesMap(c.tagExp,o,c.tagName)),this.addChild(r,i,o)}s=c.closeIndex+1}else if(e.substr(s+1,3)==="!--"){let c=ge(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){let i=e.substring(s+4,c-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:i}])}s=c}else if(e.substr(s+1,2)==="!D"){let c=Df(e,s);this.docTypeEntities=c.entities,s=c.i}else if(e.substr(s+1,2)==="!["){let c=ge(e,"]]>",s,"CDATA is not closed.")-2,i=e.substring(s+9,c);if(n=this.saveTextToParentTag(n,r,o),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:i}]);else{let d=this.parseTextData(i,r.tagname,o,!0,!1,!0);d==null&&(d=""),r.add(this.options.textNodeName,d)}s=c+2}else{let c=Rn(e,s,this.options.removeNSPrefix),i=c.tagName,d=c.tagExp,y=c.attrExpPresent,l=c.closeIndex;this.options.transformTagName&&(i=this.options.transformTagName(i)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,o,!1));let f=r;if(f&&this.options.unpairedTags.indexOf(f.tagname)!==-1&&(r=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),i!==t.tagname&&(o+=o?"."+i:i),this.isItStopNode(this.options.stopNodes,o,i)){let u="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)s=c.closeIndex;else if(this.options.unpairedTags.indexOf(i)!==-1)s=c.closeIndex;else{let b=this.readStopNodeData(e,i,l+1);if(!b)throw new Error(`Unexpected end of ${i}`);s=b.i,u=b.tagContent}let m=new mt(i);i!==d&&y&&(m[":@"]=this.buildAttributesMap(d,o,i)),u&&(u=this.parseTextData(u,i,o,!0,y,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),m.add(this.options.textNodeName,u),this.addChild(r,m,o)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){i[i.length-1]==="/"?(i=i.substr(0,i.length-1),d=i):d=d.substr(0,d.length-1),this.options.transformTagName&&(i=this.options.transformTagName(i));let u=new mt(i);i!==d&&y&&(u[":@"]=this.buildAttributesMap(d,o,i)),this.addChild(r,u,o),o=o.substr(0,o.lastIndexOf("."))}else{let u=new mt(i);this.tagsNodeStack.push(r),i!==d&&y&&(u[":@"]=this.buildAttributesMap(d,o,i)),this.addChild(r,u,o),r=u}n="",s=l}}else n+=e[s];return t.child};function qf(e,t,r){let n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t))}var Kf=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function jf(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function zf(e,t,r){let n="*."+r;for(let o in e){let s=e[o];if(n===s||t===s)return!0}return!1}function Gf(e,t,r=">"){let n,o="";for(let s=t;s<e.length;s++){let a=e[s];if(n)a===n&&(n="");else if(a==='"'||a==="'")n=a;else if(a===r[0])if(r[1]){if(e[s+1]===r[1])return{data:o,index:s}}else return{data:o,index:s};else a==="	"&&(a=" ");o+=a}}function ge(e,t,r,n){let o=e.indexOf(t,r);if(o===-1)throw new Error(n);return o+t.length-1}function Rn(e,t,r,n=">"){let o=Gf(e,t+1,n);if(!o)return;let s=o.data,a=o.index,c=s.search(/\s/),i=s,d=!0;if(c!==-1&&(i=s.substr(0,c).replace(/\s\s*$/,""),s=s.substr(c+1)),r){let y=i.indexOf(":");y!==-1&&(i=i.substr(y+1),d=i!==o.data.substr(y+1))}return{tagName:i,tagExp:s,closeIndex:a,attrExpPresent:d}}function Hf(e,t,r){let n=r,o=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let s=ge(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(o--,o===0))return{tagContent:e.substring(n,r),i:s};r=s}else if(e[r+1]==="?")r=ge(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=ge(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=ge(e,"]]>",r,"StopNode is not closed.")-2;else{let s=Rn(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&o++,r=s.closeIndex)}}function Bn(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:Nf(e,r)}else return On.isExist(e)?e:""}Fa.exports=Tn});var Ka=_(qa=>{"use strict";function Vf(e,t){return $a(e,t)}function $a(e,t,r){let n,o={};for(let s=0;s<e.length;s++){let a=e[s],c=Yf(a),i="";if(r===void 0?i=c:i=r+"."+c,c===t.textNodeName)n===void 0?n=a[c]:n+=""+a[c];else{if(c===void 0)continue;if(a[c]){let d=$a(a[c],t,i),y=Xf(d,t);a[":@"]?Wf(d,a[":@"],i,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),o[c]!==void 0&&o.hasOwnProperty(c)?(Array.isArray(o[c])||(o[c]=[o[c]]),o[c].push(d)):t.isArray(c,i,y)?o[c]=[d]:o[c]=d}}}return typeof n=="string"?n.length>0&&(o[t.textNodeName]=n):n!==void 0&&(o[t.textNodeName]=n),o}function Yf(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function Wf(e,t,r,n){if(t){let o=Object.keys(t),s=o.length;for(let a=0;a<s;a++){let c=o[a];n.isArray(c,r+"."+c,!0,!0)?e[c]=[t[c]]:e[c]=t[c]}}}function Xf(e,t){let{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}qa.prettify=Vf});var za=_((iA,ja)=>{var{buildOptions:Qf}=Ia(),Zf=Ua(),{prettify:Jf}=Ka(),em=Sn(),kn=class{constructor(t){this.externalEntities={},this.options=Qf(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=em.validate(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let n=new Zf(this.options);n.addExternalEntities(this.externalEntities);let o=n.parseXml(t);return this.options.preserveOrder||o===void 0?o:Jf(o,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};ja.exports=kn});var Wa=_((dA,Ya)=>{var tm=`
`;function rm(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=tm),Ha(e,t,"",r)}function Ha(e,t,r,n){let o="",s=!1;for(let a=0;a<e.length;a++){let c=e[a],i=nm(c),d="";if(r.length===0?d=i:d=`${r}.${i}`,i===t.textNodeName){let m=c[i];om(d,t)||(m=t.tagValueProcessor(i,m),m=Va(m,t)),s&&(o+=n),o+=m,s=!1;continue}else if(i===t.cdataPropName){s&&(o+=n),o+=`<![CDATA[${c[i][0][t.textNodeName]}]]>`,s=!1;continue}else if(i===t.commentPropName){o+=n+`<!--${c[i][0][t.textNodeName]}-->`,s=!0;continue}else if(i[0]==="?"){let m=Ga(c[":@"],t),b=i==="?xml"?"":n,h=c[i][0][t.textNodeName];h=h.length!==0?" "+h:"",o+=b+`<${i}${h}${m}?>`,s=!0;continue}let y=n;y!==""&&(y+=t.indentBy);let l=Ga(c[":@"],t),f=n+`<${i}${l}`,u=Ha(c[i],t,d,y);t.unpairedTags.indexOf(i)!==-1?t.suppressUnpairedNode?o+=f+">":o+=f+"/>":(!u||u.length===0)&&t.suppressEmptyNode?o+=f+"/>":u&&u.endsWith(">")?o+=f+`>${u}${n}</${i}>`:(o+=f+">",u&&n!==""&&(u.includes("/>")||u.includes("</"))?o+=n+t.indentBy+u+n:o+=u,o+=`</${i}>`),s=!0}return o}function nm(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function Ga(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){let o=t.attributeValueProcessor(n,e[n]);o=Va(o,t),o===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${o}"`}return r}function om(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function Va(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let n=t.entities[r];e=e.replace(n.regex,n.val)}return e}Ya.exports=rm});var Qa=_((lA,Xa)=>{"use strict";var sm=Wa(),am={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function ae(e){this.options=Object.assign({},am,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=dm),this.processTextOrObjNode=cm,this.options.format?(this.indentate=im,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}ae.prototype.build=function(e){return this.options.preserveOrder?sm(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};ae.prototype.j2x=function(e,t){let r="",n="";for(let o in e)if(!(typeof e[o]>"u"))if(e[o]===null)o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)n+=this.buildTextValNode(e[o],o,"",t);else if(typeof e[o]!="object"){let s=this.isAttribute(o);if(s)r+=this.buildAttrPairStr(s,""+e[o]);else if(o===this.options.textNodeName){let a=this.options.tagValueProcessor(o,""+e[o]);n+=this.replaceEntitiesValue(a)}else n+=this.buildTextValNode(e[o],o,"",t)}else if(Array.isArray(e[o])){let s=e[o].length,a="";for(let c=0;c<s;c++){let i=e[o][c];typeof i>"u"||(i===null?o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar:typeof i=="object"?this.options.oneListGroup?a+=this.j2x(i,t+1).val:a+=this.processTextOrObjNode(i,o,t):a+=this.buildTextValNode(i,o,"",t))}this.options.oneListGroup&&(a=this.buildObjectNode(a,o,"",t)),n+=a}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let s=Object.keys(e[o]),a=s.length;for(let c=0;c<a;c++)r+=this.buildAttrPairStr(s[c],""+e[o][s[c]])}else n+=this.processTextOrObjNode(e[o],o,t);return{attrStr:r,val:n}};ae.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function cm(e,t,r){let n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}ae.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let o="</"+t+this.tagEndChar,s="";return t[0]==="?"&&(s="?",o=""),r&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+s+">"+e+o:this.options.commentPropName!==!1&&t===this.options.commentPropName&&s.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+s+this.tagEndChar+e+this.indentate(n)+o}};ae.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};ae.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let o=this.options.tagValueProcessor(t,e);return o=this.replaceEntitiesValue(o),o===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+o+"</"+t+this.tagEndChar}};ae.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function im(e){return this.options.indentBy.repeat(e)}function dm(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}Xa.exports=ae});var Ja=_((fA,Za)=>{"use strict";var lm=Sn(),fm=za(),mm=Qa();Za.exports={XMLParser:fm,XMLValidator:lm,XMLBuilder:mm}});var xo=_((QA,Mr)=>{var ii,di,li,fi,mi,yi,ui,hi,bi,vr,go,gi,xi,ze,Ci,_i,Ei,pi,Si,wi,Ai,Ti,Ri;(function(e){var t=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){e(r(t,r(n)))}):typeof Mr=="object"&&typeof Mr.exports=="object"?e(r(t,r(Mr.exports))):e(r(t));function r(n,o){return n!==t&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,a){return n[s]=o?o(s,a):a}}})(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])};ii=function(r,n){t(r,n);function o(){this.constructor=r}r.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)},di=Object.assign||function(r){for(var n,o=1,s=arguments.length;o<s;o++){n=arguments[o];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},li=function(r,n){var o={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&n.indexOf(s)<0&&(o[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)n.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(o[s[a]]=r[s[a]]);return o},fi=function(r,n,o,s){var a=arguments.length,c=a<3?n:s===null?s=Object.getOwnPropertyDescriptor(n,o):s,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(r,n,o,s);else for(var d=r.length-1;d>=0;d--)(i=r[d])&&(c=(a<3?i(c):a>3?i(n,o,c):i(n,o))||c);return a>3&&c&&Object.defineProperty(n,o,c),c},mi=function(r,n){return function(o,s){n(o,s,r)}},yi=function(r,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,n)},ui=function(r,n,o,s){function a(c){return c instanceof o?c:new o(function(i){i(c)})}return new(o||(o=Promise))(function(c,i){function d(f){try{l(s.next(f))}catch(u){i(u)}}function y(f){try{l(s.throw(f))}catch(u){i(u)}}function l(f){f.done?c(f.value):a(f.value).then(d,y)}l((s=s.apply(r,n||[])).next())})},hi=function(r,n){var o={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,a,c,i;return i={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function d(l){return function(f){return y([l,f])}}function y(l){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,a&&(c=l[0]&2?a.return:l[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,l[1])).done)return c;switch(a=0,c&&(l=[l[0]&2,c.value]),l[0]){case 0:case 1:c=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,a=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(c=o.trys,!(c=c.length>0&&c[c.length-1])&&(l[0]===6||l[0]===2)){o=0;continue}if(l[0]===3&&(!c||l[1]>c[0]&&l[1]<c[3])){o.label=l[1];break}if(l[0]===6&&o.label<c[1]){o.label=c[1],c=l;break}if(c&&o.label<c[2]){o.label=c[2],o.ops.push(l);break}c[2]&&o.ops.pop(),o.trys.pop();continue}l=n.call(r,o)}catch(f){l=[6,f],a=0}finally{s=c=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Ri=function(r,n,o,s){s===void 0&&(s=o),r[s]=n[o]},bi=function(r,n){for(var o in r)o!=="default"&&!n.hasOwnProperty(o)&&(n[o]=r[o])},vr=function(r){var n=typeof Symbol=="function"&&Symbol.iterator,o=n&&r[n],s=0;if(o)return o.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},go=function(r,n){var o=typeof Symbol=="function"&&r[Symbol.iterator];if(!o)return r;var s=o.call(r),a,c=[],i;try{for(;(n===void 0||n-- >0)&&!(a=s.next()).done;)c.push(a.value)}catch(d){i={error:d}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return c},gi=function(){for(var r=[],n=0;n<arguments.length;n++)r=r.concat(go(arguments[n]));return r},xi=function(){for(var r=0,n=0,o=arguments.length;n<o;n++)r+=arguments[n].length;for(var s=Array(r),a=0,n=0;n<o;n++)for(var c=arguments[n],i=0,d=c.length;i<d;i++,a++)s[a]=c[i];return s},ze=function(r){return this instanceof ze?(this.v=r,this):new ze(r)},Ci=function(r,n,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=o.apply(r,n||[]),a,c=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(m){s[m]&&(a[m]=function(b){return new Promise(function(h,g){c.push([m,b,h,g])>1||d(m,b)})})}function d(m,b){try{y(s[m](b))}catch(h){u(c[0][3],h)}}function y(m){m.value instanceof ze?Promise.resolve(m.value.v).then(l,f):u(c[0][2],m)}function l(m){d("next",m)}function f(m){d("throw",m)}function u(m,b){m(b),c.shift(),c.length&&d(c[0][0],c[0][1])}},_i=function(r){var n,o;return n={},s("next"),s("throw",function(a){throw a}),s("return"),n[Symbol.iterator]=function(){return this},n;function s(a,c){n[a]=r[a]?function(i){return(o=!o)?{value:ze(r[a](i)),done:a==="return"}:c?c(i):i}:c}},Ei=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],o;return n?n.call(r):(r=typeof vr=="function"?vr(r):r[Symbol.iterator](),o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o);function s(c){o[c]=r[c]&&function(i){return new Promise(function(d,y){i=r[c](i),a(d,y,i.done,i.value)})}}function a(c,i,d,y){Promise.resolve(y).then(function(l){c({value:l,done:d})},i)}},pi=function(r,n){return Object.defineProperty?Object.defineProperty(r,"raw",{value:n}):r.raw=n,r},Si=function(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var o in r)Object.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n.default=r,n},wi=function(r){return r&&r.__esModule?r:{default:r}},Ai=function(r,n){if(!n.has(r))throw new TypeError("attempted to get private field on non-instance");return n.get(r)},Ti=function(r,n,o){if(!n.has(r))throw new TypeError("attempted to set private field on non-instance");return n.set(r,o),o},e("__extends",ii),e("__assign",di),e("__rest",li),e("__decorate",fi),e("__param",mi),e("__metadata",yi),e("__awaiter",ui),e("__generator",hi),e("__exportStar",bi),e("__createBinding",Ri),e("__values",vr),e("__read",go),e("__spread",gi),e("__spreadArrays",xi),e("__await",ze),e("__asyncGenerator",Ci),e("__asyncDelegator",_i),e("__asyncValues",Ei),e("__makeTemplateObject",pi),e("__importStar",Si),e("__importDefault",wi),e("__classPrivateFieldGet",Ai),e("__classPrivateFieldSet",Ti)})});var ki=_(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.AwsCrc32c=void 0;var Bi=xo(),Co=ct(),Oi=_o(),My=function(){function e(){this.crc32c=new Oi.Crc32c}return e.prototype.update=function(t){(0,Co.isEmptyData)(t)||this.crc32c.update((0,Co.convertToBuffer)(t))},e.prototype.digest=function(){return Bi.__awaiter(this,void 0,void 0,function(){return Bi.__generator(this,function(t){return[2,(0,Co.numToUint8)(this.crc32c.digest())]})})},e.prototype.reset=function(){this.crc32c=new Oi.Crc32c},e}();Lr.AwsCrc32c=My});var _o=_(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.AwsCrc32c=ce.Crc32c=ce.crc32c=void 0;var Ly=xo(),Fy=ct();function Uy(e){return new Ii().update(e).digest()}ce.crc32c=Uy;var Ii=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=Ly.__values(t),s=o.next();!s.done;s=o.next()){var a=s.value;this.checksum=this.checksum>>>8^qy[(this.checksum^a)&255]}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();ce.Crc32c=Ii;var $y=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],qy=(0,Fy.uint32ArrayFrom)($y),Ky=ki();Object.defineProperty(ce,"AwsCrc32c",{enumerable:!0,get:function(){return Ky.AwsCrc32c}})});var ji=_((ER,Ki)=>{"use strict";function qi(e,t){for(let r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}function jy(e,t,r){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof t=="object"&&(r=t,t=""),t&&(r.code=t);try{return qi(e,r)}catch{r.message=e.message,r.stack=e.stack;let o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),qi(new o,r)}}Ki.exports=jy});var eh={};P(eh,{S3Blockstore:()=>Vo});var Wo;(function(e){e.HEADER="header",e.QUERY="query"})(Wo||(Wo={}));var Wr;(function(e){e.HEADER="header",e.QUERY="query"})(Wr||(Wr={}));var Xo;(function(e){e.HTTP="http",e.HTTPS="https"})(Xo||(Xo={}));var vt;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(vt||(vt={}));var Xr;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Xr||(Xr={}));var Se="__smithy_context";var Qo;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(Qo||(Qo={}));var Zo;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(Zo||(Zo={}));var O=class e{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let t=new e({...this,headers:{...this.headers}});return t.query&&(t.query=pd(t.query)),t}};function pd(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var J=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};var Qe=class{trace(){}debug(){}info(){}warn(){}error(){}};var le=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let n of t)r.push(n);return r},ee=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Ze=()=>{let e=[],t=[],r=!1,n=new Set,o=l=>l.sort((f,u)=>Jo[u.step]-Jo[f.step]||es[u.priority||"normal"]-es[f.priority||"normal"]),s=l=>{let f=!1,u=m=>{let b=le(m.name,m.aliases);if(b.includes(l)){f=!0;for(let h of b)n.delete(h);return!1}return!0};return e=e.filter(u),t=t.filter(u),f},a=l=>{let f=!1,u=m=>{if(m.middleware===l){f=!0;for(let b of le(m.name,m.aliases))n.delete(b);return!1}return!0};return e=e.filter(u),t=t.filter(u),f},c=l=>(e.forEach(f=>{l.add(f.middleware,{...f})}),t.forEach(f=>{l.addRelativeTo(f.middleware,{...f})}),l.identifyOnResolve?.(y.identifyOnResolve()),l),i=l=>{let f=[];return l.before.forEach(u=>{u.before.length===0&&u.after.length===0?f.push(u):f.push(...i(u))}),f.push(l),l.after.reverse().forEach(u=>{u.before.length===0&&u.after.length===0?f.push(u):f.push(...i(u))}),f},d=(l=!1)=>{let f=[],u=[],m={};return e.forEach(h=>{let g={...h,before:[],after:[]};for(let x of le(g.name,g.aliases))m[x]=g;f.push(g)}),t.forEach(h=>{let g={...h,before:[],after:[]};for(let x of le(g.name,g.aliases))m[x]=g;u.push(g)}),u.forEach(h=>{if(h.toMiddleware){let g=m[h.toMiddleware];if(g===void 0){if(l)return;throw new Error(`${h.toMiddleware} is not found when adding ${ee(h.name,h.aliases)} middleware ${h.relation} ${h.toMiddleware}`)}h.relation==="after"&&g.after.push(h),h.relation==="before"&&g.before.push(h)}}),o(f).map(i).reduce((h,g)=>(h.push(...g),h),[])},y={add:(l,f={})=>{let{name:u,override:m,aliases:b}=f,h={step:"initialize",priority:"normal",middleware:l,...f},g=le(u,b);if(g.length>0){if(g.some(x=>n.has(x))){if(!m)throw new Error(`Duplicate middleware name '${ee(u,b)}'`);for(let x of g){let p=e.findIndex(B=>B.name===x||B.aliases?.some(D=>D===x));if(p===-1)continue;let C=e[p];if(C.step!==h.step||h.priority!==C.priority)throw new Error(`"${ee(C.name,C.aliases)}" middleware with ${C.priority} priority in ${C.step} step cannot be overridden by "${ee(u,b)}" middleware with ${h.priority} priority in ${h.step} step.`);e.splice(p,1)}}for(let x of g)n.add(x)}e.push(h)},addRelativeTo:(l,f)=>{let{name:u,override:m,aliases:b}=f,h={middleware:l,...f},g=le(u,b);if(g.length>0){if(g.some(x=>n.has(x))){if(!m)throw new Error(`Duplicate middleware name '${ee(u,b)}'`);for(let x of g){let p=t.findIndex(B=>B.name===x||B.aliases?.some(D=>D===x));if(p===-1)continue;let C=t[p];if(C.toMiddleware!==h.toMiddleware||C.relation!==h.relation)throw new Error(`"${ee(C.name,C.aliases)}" middleware ${C.relation} "${C.toMiddleware}" middleware cannot be overridden by "${ee(u,b)}" middleware ${h.relation} "${h.toMiddleware}" middleware.`);t.splice(p,1)}}for(let x of g)n.add(x)}t.push(h)},clone:()=>c(Ze()),use:l=>{l.applyToStack(y)},remove:l=>typeof l=="string"?s(l):a(l),removeByTag:l=>{let f=!1,u=m=>{let{tags:b,name:h,aliases:g}=m;if(b&&b.includes(l)){let x=le(h,g);for(let p of x)n.delete(p);return f=!0,!1}return!0};return e=e.filter(u),t=t.filter(u),f},concat:l=>{let f=c(Ze());return f.use(l),f.identifyOnResolve(r||f.identifyOnResolve()||(l.identifyOnResolve?.()??!1)),f},applyToStack:c,identify:()=>d(!0).map(l=>{let f=l.step??l.relation+" "+l.toMiddleware;return ee(l.name,l.aliases)+" - "+f}),identifyOnResolve(l){return typeof l=="boolean"&&(r=l),r},resolve:(l,f)=>{for(let u of d().map(m=>m.middleware).reverse())l=u(l,f);return r&&console.log(y.identify()),l}};return y},Jo={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},es={high:3,normal:2,low:1};var H={},fe=new Array(64);for(let e=0,t=65,r=90;e+t<=r;e++){let n=String.fromCharCode(e+t);H[n]=e,fe[e]=n}for(let e=0,t=97,r=122;e+t<=r;e++){let n=String.fromCharCode(e+t),o=e+26;H[n]=o,fe[o]=n}for(let e=0;e<10;e++){H[e.toString(10)]=e+52;let t=e.toString(10),r=e+52;H[t]=r,fe[r]=t}H["+"]=62;fe[62]="+";H["/"]=63;fe[63]="/";var te=6,me=8,ts=63;var Qr=e=>{let t=e.length/4*3;e.slice(-2)==="=="?t-=2:e.slice(-1)==="="&&t--;let r=new ArrayBuffer(t),n=new DataView(r);for(let o=0;o<e.length;o+=4){let s=0,a=0;for(let d=o,y=o+3;d<=y;d++)if(e[d]!=="="){if(!(e[d]in H))throw new TypeError(`Invalid character ${e[d]} in base64 string.`);s|=H[e[d]]<<(y-d)*te,a+=te}else s>>=te;let c=o/4*3;s>>=a%me;let i=Math.floor(a/me);for(let d=0;d<i;d++){let y=(i-d-1)*me;n.setUint8(c+d,(s&255<<y)>>y)}}return new Uint8Array(r)};function Zr(e){let t="";for(let r=0;r<e.length;r+=3){let n=0,o=0;for(let a=r,c=Math.min(r+3,e.length);a<c;a++)n|=e[a]<<(c-a-1)*me,o+=me;let s=Math.ceil(o/te);n<<=s*te-o;for(let a=1;a<=s;a++){let c=(s-a)*te;t+=fe[(n&ts<<c)>>c]}t+="==".slice(0,4-s)}return t}var Je=e=>new TextEncoder().encode(e);var et=e=>typeof e=="string"?Je(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var Mt=e=>new TextDecoder("utf-8").decode(e);function rs(e,t="utf-8"){return t==="base64"?Zr(e):Mt(e)}function ns(e,t){return t==="base64"?V.mutate(Qr(e)):V.mutate(Je(e))}var V=class e extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return ns(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return rs(this,t)}};var Rg={supported:typeof Request<"u"&&"keepalive"in new Request("https://[::1]")};var Sd={},wd={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Sd[e]=t,wd[t]=e}var we=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return V.mutate(e);if(!e)return V.mutate(new Uint8Array);let r=t.streamCollector(e);return V.mutate(await r)};var k=class{constructor(){this.middlewareStack=Ze()}static classBuilder(){return new Jr}resolveMiddlewareWithContext(t,r,n,{middlewareFn:o,clientName:s,commandName:a,inputFilterSensitiveLog:c,outputFilterSensitiveLog:i,smithyContext:d,additionalContext:y,CommandCtor:l}){for(let h of o.bind(this)(l,t,r,n))this.middlewareStack.use(h);let f=t.concat(this.middlewareStack),{logger:u}=r,m={logger:u,clientName:s,commandName:a,inputFilterSensitiveLog:c,outputFilterSensitiveLog:i,[Se]:{...d},...y},{requestHandler:b}=r;return f.resolve(h=>b.handle(h.request,n||{}),m)}},Jr=class{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=t=>t,this._outputFilterSensitiveLog=t=>t,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}build(){let t=this,r;return r=class extends k{static getEndpointParameterInstructions(){return t._ep}constructor(n){super(),this.input=n,this.serialize=t._serializer,this.deserialize=t._deserializer,t._init(this)}resolveMiddleware(n,o,s){return this.resolveMiddlewareWithContext(n,o,s,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}};var U="***SensitiveInformation***";var Y=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}};var Ad=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&ys.warn(ms(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},Td=Math.ceil(34028234663852886e22),ss=e=>{let t=Ad(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>Td)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},en=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var as=e=>tn(e,32),cs=e=>tn(e,16),is=e=>tn(e,8),tn=(e,t)=>{let r=en(e);if(r!==void 0&&Rd(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},Rd=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},q=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},ds=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},T=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return ys.warn(ms(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var ls=e=>ss(typeof e=="string"?rt(e):e),Bd=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,rt=e=>{let t=e.match(Bd);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var Lt=e=>en(typeof e=="string"?rt(e):e);var re=e=>as(typeof e=="string"?rt(e):e),nt=e=>cs(typeof e=="string"?rt(e):e),fs=e=>is(typeof e=="string"?rt(e):e),ms=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),ys={warn:console.warn};var Od=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],nn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ye(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),o=e.getUTCDate(),s=e.getUTCHours(),a=e.getUTCMinutes(),c=e.getUTCSeconds(),i=o<10?`0${o}`:`${o}`,d=s<10?`0${s}`:`${s}`,y=a<10?`0${a}`:`${a}`,l=c<10?`0${c}`:`${c}`;return`${Od[n]}, ${i} ${nn[r]} ${t} ${d}:${y}:${l} GMT`}var rx=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var kd=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),st=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=kd.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,a,c,i,d,y]=t,l=nt(ot(n)),f=ne(o,"month",1,12),u=ne(s,"day",1,31),m=Ft(l,f,u,{hours:a,minutes:c,seconds:i,fractionalMilliseconds:d});return y.toUpperCase()!="Z"&&m.setTime(m.getTime()-qd(y)),m},Id=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Pd=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Dd=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),ue=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=Id.exec(e);if(t){let[r,n,o,s,a,c,i,d]=t;return Ft(nt(ot(s)),rn(o),ne(n,"day",1,31),{hours:a,minutes:c,seconds:i,fractionalMilliseconds:d})}if(t=Pd.exec(e),t){let[r,n,o,s,a,c,i,d]=t;return Md(Ft(Nd(s),rn(o),ne(n,"day",1,31),{hours:a,minutes:c,seconds:i,fractionalMilliseconds:d}))}if(t=Dd.exec(e),t){let[r,n,o,s,a,c,i,d]=t;return Ft(nt(ot(d)),rn(n),ne(o.trimLeft(),"day",1,31),{hours:s,minutes:a,seconds:c,fractionalMilliseconds:i})}throw new TypeError("Invalid RFC-7231 date-time value")};var Ft=(e,t,r,n)=>{let o=t-1;return Fd(e,o,r),new Date(Date.UTC(e,o,r,ne(n.hours,"hour",0,23),ne(n.minutes,"minute",0,59),ne(n.seconds,"seconds",0,60),$d(n.fractionalMilliseconds)))},Nd=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+nt(ot(e));return r<t?r+100:r},vd=50*365*24*60*60*1e3,Md=e=>e.getTime()-new Date().getTime()>vd?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,rn=e=>{let t=nn.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},Ld=[31,28,31,30,31,30,31,31,30,31,30,31],Fd=(e,t,r)=>{let n=Ld[t];if(t===1&&Ud(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${nn[t]} in ${e}: ${r}`)},Ud=e=>e%4===0&&(e%100!==0||e%400===0),ne=(e,t,r,n)=>{let o=fs(ot(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},$d=e=>e==null?0:ls("0."+e)*1e3,qd=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},ot=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var Ut=class e extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,e.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},W=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};var Kd=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=jd(e),s=o.httpStatusCode?o.httpStatusCode+"":void 0,a=new r({name:t?.code||t?.Code||n||s||"UnknownError",$fault:"client",$metadata:o});throw W(a,t)},us=e=>({output:t,parsedBody:r,errorCode:n})=>{Kd({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},jd=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});function on(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var $t=e=>Array.isArray(e)?e:[e];var sn=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=sn(e[r]));return e};var an=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};an.prototype=Object.create(String.prototype,{constructor:{value:an,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(an,String);function E(e,t,r){let n,o,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return o=t,s=r,zd(n,o,s);s=t}for(let a of Object.keys(s)){if(!Array.isArray(s[a])){n[a]=s[a];continue}Gd(n,null,s,a)}return n}var zd=(e,t,r)=>E(e,Object.entries(r).reduce((n,[o,s])=>(Array.isArray(s)?n[o]=s:typeof s=="function"?n[o]=[t,s()]:n[o]=[t,s],n),{})),Gd=(e,t,r,n)=>{if(t!==null){let a=r[n];typeof a=="function"&&(a=[,a]);let[c=Hd,i=Vd,d=n]=a;(typeof c=="function"&&c(t[d])||typeof c!="function"&&c)&&(e[n]=i(t[d]));return}let[o,s]=r[n];if(typeof s=="function"){let a,c=o===void 0&&(a=s())!=null,i=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;c?e[n]=a:i&&(e[n]=s())}else{let a=o===void 0&&s!=null,c=typeof o=="function"&&!!o(s)||typeof o!="function"&&!!o;(a||c)&&(e[n]=s)}},Hd=e=>e!=null,Vd=e=>e;var hs=(e,t,r,n,o,s)=>{if(t!=null&&t[r]!==void 0){let a=n();if(a.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(o,s?a.split("/").map(c=>on(c)).join("/"):on(a))}else throw new Error("No value provided for input HTTP label: "+r+".");return e};var Yd="content-length";function Wd(){return(e,t)=>async r=>{let{request:n}=r;if(O.isInstance(n)&&!n.headers[Yd]){let o="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof t?.logger?.warn=="function"&&!(t.logger instanceof Qe)?t.logger.warn(o):console.warn(o)}return e({...r})}}var Xd={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},bs=e=>({applyToStack:t=>{t.add(Wd(),Xd)}});var Qd=e=>(t,r)=>async n=>{let o=await t(n),{response:s}=o;if(J.isInstance(s)&&s.headers.expires){s.headers.expiresstring=s.headers.expires;try{ue(s.headers.expires)}catch(a){r.logger?.warn(`AWS SDK Warning for ${r.clientName}::${r.commandName} response parsing (${s.headers.expires}): ${a}`),delete s.headers.expires}}return o},Zd={tags:["S3"],name:"s3ExpiresMiddleware",override:!0,relation:"after",toMiddleware:"deserializerMiddleware"},qt=e=>({applyToStack:t=>{t.addRelativeTo(Qd(e),Zd)}});var Ae=class e{constructor(t={}){this.data=t,this.lastPurgeTime=Date.now()}get(t){let r=this.data[t];if(r)return r}set(t,r){return this.data[t]=r,r}delete(t){delete this.data[t]}async purgeExpired(){let t=Date.now();if(!(this.lastPurgeTime+e.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>t))for(let r in this.data){let n=this.data[r];if(!n.isRefreshing){let o=await n.identity;o.expiration&&o.expiration.getTime()<t&&delete this.data[r]}}}};Ae.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS=3e4;var he=class{constructor(t,r=!1,n=Date.now()){this._identity=t,this.isRefreshing=r,this.accessed=n}get identity(){return this.accessed=Date.now(),this._identity}};var at=class e{constructor(t,r=new Ae){this.createSessionFn=t,this.cache=r}async getS3ExpressIdentity(t,r){let n=r.Bucket,{cache:o}=this,s=o.get(n);return s?s.identity.then(a=>(a.expiration?.getTime()??0)<Date.now()?o.set(n,new he(this.getIdentity(n))).identity:((a.expiration?.getTime()??0)<Date.now()+e.REFRESH_WINDOW_MS&&!s.isRefreshing&&(s.isRefreshing=!0,this.getIdentity(n).then(d=>{o.set(n,new he(Promise.resolve(d)))})),a)):o.set(n,new he(this.getIdentity(n))).identity}async getIdentity(t){await this.cache.purgeExpired().catch(o=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+o)});let r=await this.createSessionFn(t);if(!r.Credentials?.AccessKeyId||!r.Credentials?.SecretAccessKey)throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretAccessKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration?new Date(r.Credentials.Expiration):void 0}}};at.REFRESH_WINDOW_MS=6e4;var Rl=pe(it());var Xs;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(Xs||(Xs={}));var pl=pe(it()),Sl=4,wl=Sl*2,Al=4,NC=wl+Al*2;var Wt=e=>e[Se]||(e[Se]={});var Qs="X-Amz-Date";var Zs="X-Amz-Signature",Js="X-Amz-Security-Token";var Bl=Qs.toLowerCase();var Ol=Zs.toLowerCase();var kl=Js.toLowerCase();var Il=60*60*24*7;var fn=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var mn;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(mn||(mn={}));var ta="X-Amz-S3session-Token",ra=ta.toLowerCase();var na=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),jl(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Kl(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},Ul=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,$l=/(\d+\.){3}\d+/,ql=/\.\./;var Kl=e=>Ul.test(e)&&!$l.test(e)&&!ql.test(e),jl=e=>{let[t,r,n,o,s,a]=e.split(":"),c=t==="arn"&&e.split(":").length>=6,i=[t,r,n,s,a].filter(Boolean).length===5;if(c&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!r&&!!n&&!!s&&!!a};var oa=(e,t,r)=>{let n=async()=>{let o=r[e]??r[t];return typeof o=="function"?o():o};return e==="credentialScope"||t==="CredentialScope"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.credentialScope??o?.CredentialScope}:e==="endpoint"||t==="endpoint"?async()=>{let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:s,hostname:a,port:c,path:i}=o;return`${s}//${a}${c?":"+c:""}${i}`}}return o}:n};var sa=async e=>{};function aa(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}var Xt=e=>{if(typeof e=="string")return Xt(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:s}=e,a;return s&&(a=aa(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:a}};var yn=e=>typeof e=="object"?"url"in e?Xt(e.url):e:Xt(e);var ca=async(e,t,r,n)=>{if(!r.endpoint){let a=await sa(r.serviceId||"");a&&(r.endpoint=()=>Promise.resolve(yn(a)))}let o=await zl(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},zl=async(e,t,r)=>{let n={},o=t?.getEndpointParameterInstructions?.()||{};for(let[s,a]of Object.entries(o))switch(a.type){case"staticContextParams":n[s]=a.value;break;case"contextParams":n[s]=e[a.name];break;case"clientContextParams":case"builtInParams":n[s]=await oa(a.name,s,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await na(n),n};var ia=({config:e,instructions:t})=>(r,n)=>async o=>{let s=await ca(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=s,n.authSchemes=s.properties?.authSchemes;let a=n.authSchemes?.[0];if(a){n.signing_region=a.signingRegion,n.signing_service=a.signingName;let i=Wt(n)?.selectedHttpAuthScheme?.httpAuthOption;i&&(i.signingProperties=Object.assign(i.signingProperties||{},{signing_region:a.signingRegion,signingRegion:a.signingRegion,signing_service:a.signingName,signingName:a.signingName,signingRegionSet:a.signingRegionSet},a.properties))}return r({...o})};var da=(e,t)=>(r,n)=>async o=>{let{response:s}=await r(o);try{let a=await t(s,e);return{response:s,output:a}}catch(a){if(Object.defineProperty(a,"$response",{value:s}),!("$metadata"in a)){let c="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";a.message+=`
  `+c}throw a}};var la=(e,t)=>(r,n)=>async o=>{let s=n.endpointV2?.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let a=await t(o.input,{...e,endpoint:s});return r({...o,request:a})};var Gl={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},dt={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function N(e,t,r){return{applyToStack:n=>{n.add(da(e,r),Gl),n.add(la(e,t),dt)}}}var un={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:dt.name},v=(e,t)=>({applyToStack:r=>{r.addRelativeTo(ia({config:e,instructions:t}),un)}});var se;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(se||(se={}));var Hl=se.STANDARD;var ba={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0};var M={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var $=class e extends Ut{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var Qt=class e extends ${constructor(t){super({name:"BucketAlreadyExists",$fault:"client",...t}),this.name="BucketAlreadyExists",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Zt=class e extends ${constructor(t){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...t}),this.name="BucketAlreadyOwnedByYou",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var Jt=class e extends ${constructor(t){super({name:"NoSuchBucket",$fault:"client",...t}),this.name="NoSuchBucket",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},gn;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(gn||(gn={}));var xn;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.ObjectSizeGreaterThan!==void 0?r.ObjectSizeGreaterThan(t.ObjectSizeGreaterThan):t.ObjectSizeLessThan!==void 0?r.ObjectSizeLessThan(t.ObjectSizeLessThan):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(xn||(xn={}));var Cn;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.AccessPointArn!==void 0?r.AccessPointArn(t.AccessPointArn):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(Cn||(Cn={}));var _n;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(_n||(_n={}));var er=class e extends ${constructor(t){super({name:"InvalidObjectState",$fault:"client",...t}),this.name="InvalidObjectState",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.StorageClass=t.StorageClass,this.AccessTier=t.AccessTier}},tr=class e extends ${constructor(t){super({name:"NoSuchKey",$fault:"client",...t}),this.name="NoSuchKey",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var rr=class e extends ${constructor(t){super({name:"NotFound",$fault:"client",...t}),this.name="NotFound",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var ga=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:U}}),xa=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:U}});var Ca=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:U}}),_a=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:U}});function Ea(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function pa(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var lt=class{constructor(t){this.value=t}toString(){return pa(""+this.value)}};var j=class e{static of(t,r,n){let o=new e(t);return r!==void 0&&o.addChildNode(new lt(r)),n!==void 0&&o.withName(n),o}constructor(t,r=[]){this.name=t,this.children=r,this.attributes={}}withName(t){return this.name=t,this}addAttribute(t,r){return this.attributes[t]=r,this}addChildNode(t){return this.children.push(t),this}removeAttribute(t){return delete this.attributes[t],this}n(t){return this.name=t,this}c(t){return this.children.push(t),this}a(t,r){return r!=null&&(this.attributes[t]=r),this}cc(t,r,n=r){if(t[r]!=null){let o=e.of(r,t[r]).withName(n);this.c(o)}}l(t,r,n,o){t[r]!=null&&o().map(a=>{a.withName(n),this.c(a)})}lc(t,r,n,o){if(t[r]!=null){let s=o(),a=new e(n);s.map(c=>{a.c(c)}),this.c(a)}}toString(){let t=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let o of Object.keys(n)){let s=n[o];s!=null&&(r+=` ${o}="${Ea(""+s)}"`)}return r+=t?`>${this.children.map(o=>o.toString()).join("")}</${this.name}>`:"/>"}};var JS={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:un.name};var nw={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:dt.name};var gw={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:ba.name};var rf=e=>t=>nf(t)&&t.expiration.getTime()-Date.now()<e;var Iw=rf(3e5),nf=e=>e.expiration!==void 0;function be(e,t){return new En(e,t)}var En=class{constructor(t,r){this.input=t,this.context=r,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){let{hostname:t,protocol:r="https",port:n,path:o}=await this.context.endpoint();this.path=o;for(let s of this.resolvePathStack)s(this.path);return new O({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,o){return this.resolvePathStack.push(s=>{this.path=hs(s,this.input,t,r,n,o)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}};var cc=pe(Ja());var ec;(function(e){e.visit=(t,r)=>t.Records!==void 0?r.Records(t.Records):t.Stats!==void 0?r.Stats(t.Stats):t.Progress!==void 0?r.Progress(t.Progress):t.Cont!==void 0?r.Cont(t.Cont):t.End!==void 0?r.End(t.End):r._(t.$unknown[0],t.$unknown[1])})(ec||(ec={}));var tc=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:U},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:U}}),rc=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:U},...e.SSEKMSKeyId&&{SSEKMSKeyId:U},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:U}});var ic=async(e,t)=>{let r=be(e,t),n=E({},R,{"content-type":"application/xml",[Gc]:e[_c],[Vc]:e[wc],[Yc]:e[Ac],[Wc]:e[Tc],[Ty]:e[Gm],[Xc]:e[Rc],[Ay]:[()=>R(e[oc]),()=>e[oc].toString()],[By]:e[Xm]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let o,s;return e.CreateBucketConfiguration!==void 0&&(s=Tm(e.CreateBucketConfiguration,t),o=py,s.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),o+=s.toString()),r.m("PUT").h(n).b(o),r.build()};var dc=async(e,t)=>{let r=be(e,t),n=E({},R,{[Ry]:e[Wm],[wt]:e[Et],[wy]:[()=>R(e[nc]),()=>e[nc].toString()],[pt]:e[Ct]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let o=E({[bo]:[,"DeleteObject"],[io]:[,e[_e]]});return r.m("DELETE").h(n).q(o).b(void 0),r.build()};var lc=async(e,t)=>{let r=be(e,t),n=E({},R,{[Uc]:e[Bc],[$c]:[()=>R(e[ur]),()=>ye(e[ur]).toString()],[qc]:e[Oc],[Kc]:[()=>R(e[hr]),()=>ye(e[hr]).toString()],[zc]:e[Dc],[Le]:e[ve],[uo]:e[eo],[Fe]:e[Me],[wt]:e[Et],[pt]:e[Ct],[Hc]:e[pc]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let o=E({[bo]:[,"GetObject"],[hy]:[,e[Qm]],[by]:[,e[Zm]],[gy]:[,e[Jm]],[xy]:[,e[ey]],[Cy]:[,e[ty]],[_y]:[()=>e.ResponseExpires!==void 0,()=>ye(e[ry]).toString()],[io]:[,e[_e]],[jc]:[()=>e.PartNumber!==void 0,()=>e[Pc].toString()]});return r.m("GET").h(n).q(o).b(void 0),r.build()};var fc=async(e,t)=>{let r=be(e,t),n=E({},R,{[Uc]:e[Bc],[$c]:[()=>R(e[ur]),()=>ye(e[ur]).toString()],[qc]:e[Oc],[Kc]:[()=>R(e[hr]),()=>ye(e[hr]).toString()],[zc]:e[Dc],[Le]:e[ve],[uo]:e[eo],[Fe]:e[Me],[wt]:e[Et],[pt]:e[Ct],[Hc]:e[pc]});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let o=E({[io]:[,e[_e]],[jc]:[()=>e.PartNumber!==void 0,()=>e[Pc].toString()]});return r.m("HEAD").h(n).q(o).b(void 0),r.build()};var mc=async(e,t)=>{let r=be(e,t),n=E({},R,{[wt]:e[Et],[pt]:e[Ct],[Oy]:[()=>R(e[sc]),()=>(e[sc]||[]).map(a=>a).join(", ")]});r.bp("/"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1);let o=E({[my]:[,"2"],[iy]:[,e[cr]],[dy]:[,e[ir]],[yy]:[()=>e.MaxKeys!==void 0,()=>e[lr].toString()],[uy]:[,e[xe]],[cy]:[,e[ar]],[ly]:[()=>e.FetchOwner!==void 0,()=>e[zm].toString()],[Ey]:[,e[fr]]});return r.m("GET").h(n).q(o).b(void 0),r.build()};var yc=async(e,t)=>{let r=be(e,t),n=E({},R,{[ao]:e[Wn]||"application/octet-stream",[Gc]:e[_c],[ro]:e[Gn],[no]:e[Hn],[oo]:e[Vn],[so]:e[Yn],[bt]:[()=>R(e[mr]),()=>e[mr].toString()],[sy]:e[qm],[ky]:e[yt],[Tr]:e[_r],[Rr]:e[Er],[Br]:e[pr],[Or]:e[Sr],[gt]:[()=>R(e[yr]),()=>ye(e[yr]).toString()],[Vc]:e[wc],[Yc]:e[Ac],[Wc]:e[Tc],[Xc]:e[Rc],[kr]:e[wr],[yo]:e[Q],[ho]:e[to],[Le]:e[ve],[uo]:e[eo],[Fe]:e[Me],[Ir]:e[Ar],[Jc]:e[Mc],[Ce]:[()=>R(e[ht]),()=>e[ht].toString()],[wt]:e[Et],[Iy]:e[ny],[mo]:e[Jn],[xt]:[()=>R(e[br]),()=>(e[br].toISOString().split(".")[0]+"Z").toString()],[fo]:e[Zn],[pt]:e[Ct],...e.Metadata!==void 0&&Object.keys(e.Metadata).reduce((c,i)=>(c[`x-amz-meta-${i.toLowerCase()}`]=e.Metadata[i],c),{})});r.bp("/{Key+}"),r.p("Bucket",()=>e.Bucket,"{Bucket}",!1),r.p("Key",()=>e.Key,"{Key+}",!0);let o=E({[bo]:[,"PutObject"]}),s,a;return e.Body!==void 0&&(a=e.Body,s=a),r.m("PUT").h(n).q(o).b(s),r.build()};var uc=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ym(e,t);let r=E({$metadata:L(e),[dr]:[,e.headers[fy]]});return await we(e.body,t),r},ym=async(e,t)=>{let r={...e,body:await Ue(e.body,t)},n=$e(e,r.body);switch(n){case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":throw await Cm(r,t);case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":throw await _m(r,t);default:let o=r.body;return Ne({output:e,parsedBody:o,errorCode:n})}};var hc=async(e,t)=>{if(e.statusCode!==204&&e.statusCode>=300)return um(e,t);let r=E({$metadata:L(e),[Xn]:[()=>e.headers[De]!==void 0,()=>Y(e.headers[De])],[_e]:[,e.headers[Pr]],[_t]:[,e.headers[St]]});return await we(e.body,t),r},um=async(e,t)=>{let r={...e,body:await Ue(e.body,t)},n=$e(e,r.body),o=r.body;return Ne({output:e,parsedBody:o,errorCode:n})};var bc=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return hm(e,t);let r=E({$metadata:L(e),[Xn]:[()=>e.headers[De]!==void 0,()=>Y(e.headers[De])],[Ec]:[,e.headers[Lc]],[Qn]:[,e.headers[lo]],[vc]:[,e.headers[Qc]],[ut]:[()=>e.headers[gr]!==void 0,()=>q(ue(e.headers[gr]))],[mr]:[()=>e.headers[bt]!==void 0,()=>Lt(e.headers[bt])],[ke]:[,e.headers[co]],[_r]:[,e.headers[Tr]],[Er]:[,e.headers[Rr]],[pr]:[,e.headers[Br]],[Sr]:[,e.headers[Or]],[kc]:[()=>e.headers[xr]!==void 0,()=>re(e.headers[xr])],[_e]:[,e.headers[Pr]],[Gn]:[,e.headers[ro]],[Hn]:[,e.headers[no]],[Vn]:[,e.headers[oo]],[Yn]:[,e.headers[so]],[Km]:[,e.headers[ay]],[Wn]:[,e.headers[ao]],[yr]:[()=>e.headers[gt]!==void 0,()=>q(ue(e.headers[gt]))],[Sc]:[,e.headers[Fc]],[to]:[,e.headers[ho]],[wr]:[,e.headers[kr]],[ve]:[,e.headers[Le]],[Me]:[,e.headers[Fe]],[Ar]:[,e.headers[Ir]],[ht]:[()=>e.headers[Ce]!==void 0,()=>Y(e.headers[Ce])],[Q]:[,e.headers[yo]],[_t]:[,e.headers[St]],[Nc]:[,e.headers[Zc]],[Ic]:[()=>e.headers[Cr]!==void 0,()=>re(e.headers[Cr])],[oy]:[()=>e.headers[ac]!==void 0,()=>re(e.headers[ac])],[Jn]:[,e.headers[mo]],[br]:[()=>e.headers[xt]!==void 0,()=>q(st(e.headers[xt]))],[Zn]:[,e.headers[fo]],Metadata:[,Object.keys(e.headers).filter(o=>o.startsWith("x-amz-meta-")).reduce((o,s)=>(o[s.substring(11)]=e.headers[s],o),{})]}),n=e.body;return t.sdkStreamMixin(n),r.Body=n,r},hm=async(e,t)=>{let r={...e,body:await Ue(e.body,t)},n=$e(e,r.body);switch(n){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await Em(r,t);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await Sm(r,t);default:let o=r.body;return Ne({output:e,parsedBody:o,errorCode:n})}};var gc=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return bm(e,t);let r=E({$metadata:L(e),[Xn]:[()=>e.headers[De]!==void 0,()=>Y(e.headers[De])],[Ec]:[,e.headers[Lc]],[Qn]:[,e.headers[lo]],[vc]:[,e.headers[Qc]],[Mm]:[,e.headers[Sy]],[ut]:[()=>e.headers[gr]!==void 0,()=>q(ue(e.headers[gr]))],[mr]:[()=>e.headers[bt]!==void 0,()=>Lt(e.headers[bt])],[_r]:[,e.headers[Tr]],[Er]:[,e.headers[Rr]],[pr]:[,e.headers[Br]],[Sr]:[,e.headers[Or]],[ke]:[,e.headers[co]],[kc]:[()=>e.headers[xr]!==void 0,()=>re(e.headers[xr])],[_e]:[,e.headers[Pr]],[Gn]:[,e.headers[ro]],[Hn]:[,e.headers[no]],[Vn]:[,e.headers[oo]],[Yn]:[,e.headers[so]],[Wn]:[,e.headers[ao]],[yr]:[()=>e.headers[gt]!==void 0,()=>q(ue(e.headers[gt]))],[Sc]:[,e.headers[Fc]],[to]:[,e.headers[ho]],[wr]:[,e.headers[kr]],[ve]:[,e.headers[Le]],[Me]:[,e.headers[Fe]],[Ar]:[,e.headers[Ir]],[ht]:[()=>e.headers[Ce]!==void 0,()=>Y(e.headers[Ce])],[Q]:[,e.headers[yo]],[_t]:[,e.headers[St]],[Nc]:[,e.headers[Zc]],[Ic]:[()=>e.headers[Cr]!==void 0,()=>re(e.headers[Cr])],[Jn]:[,e.headers[mo]],[br]:[()=>e.headers[xt]!==void 0,()=>q(st(e.headers[xt]))],[Zn]:[,e.headers[fo]],Metadata:[,Object.keys(e.headers).filter(n=>n.startsWith("x-amz-meta-")).reduce((n,o)=>(n[o.substring(11)]=e.headers[o],n),{})]});return await we(e.body,t),r},bm=async(e,t)=>{let r={...e,body:await Ue(e.body,t)},n=$e(e,r.body);switch(n){case"NotFound":case"com.amazonaws.s3#NotFound":throw await wm(r,t);default:let o=r.body;return Ne({output:e,parsedBody:o,errorCode:n})}};var xc=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return gm(e,t);let r=E({$metadata:L(e),[_t]:[,e.headers[St]]}),n=q(ds(await ei(e.body,t)),"body");return n.CommonPrefixes===""?r[or]=[]:n[or]!=null&&(r[or]=km($t(n[or]),t)),n.Contents===""?r[sr]=[]:n[sr]!=null&&(r[sr]=Pm($t(n[sr]),t)),n[ar]!=null&&(r[ar]=T(n[ar])),n[cr]!=null&&(r[cr]=T(n[cr])),n[ir]!=null&&(r[ir]=T(n[ir])),n[Mn]!=null&&(r[Mn]=Y(n[Mn])),n[Fn]!=null&&(r[Fn]=re(n[Fn])),n[lr]!=null&&(r[lr]=re(n[lr])),n[Ie]!=null&&(r[Ie]=T(n[Ie])),n[$n]!=null&&(r[$n]=T(n[$n])),n[xe]!=null&&(r[xe]=T(n[xe])),n[fr]!=null&&(r[fr]=T(n[fr])),r},gm=async(e,t)=>{let r={...e,body:await Ue(e.body,t)},n=$e(e,r.body);switch(n){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await pm(r,t);default:let o=r.body;return Ne({output:e,parsedBody:o,errorCode:n})}};var Cc=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return xm(e,t);let r=E({$metadata:L(e),[Qn]:[,e.headers[lo]],[ke]:[,e.headers[co]],[_r]:[,e.headers[Tr]],[Er]:[,e.headers[Rr]],[pr]:[,e.headers[Br]],[Sr]:[,e.headers[Or]],[wr]:[,e.headers[kr]],[_e]:[,e.headers[Pr]],[ve]:[,e.headers[Le]],[Me]:[,e.headers[Fe]],[Ar]:[,e.headers[Ir]],[Mc]:[,e.headers[Jc]],[ht]:[()=>e.headers[Ce]!==void 0,()=>Y(e.headers[Ce])],[_t]:[,e.headers[St]]});return await we(e.body,t),r},xm=async(e,t)=>{let r={...e,body:await Ue(e.body,t)},n=$e(e,r.body),o=r.body;return Ne({output:e,parsedBody:o,errorCode:n})};var Ne=us($),Cm=async(e,t)=>{let r=E({}),n=e.body,o=new Qt({$metadata:L(e),...r});return W(o,e.body)},_m=async(e,t)=>{let r=E({}),n=e.body,o=new Zt({$metadata:L(e),...r});return W(o,e.body)},Em=async(e,t)=>{let r=E({}),n=e.body;n[In]!=null&&(r[In]=T(n[In])),n[Q]!=null&&(r[Q]=T(n[Q]));let o=new er({$metadata:L(e),...r});return W(o,e.body)},pm=async(e,t)=>{let r=E({}),n=e.body,o=new Jt({$metadata:L(e),...r});return W(o,e.body)},Sm=async(e,t)=>{let r=E({}),n=e.body,o=new tr({$metadata:L(e),...r});return W(o,e.body)};var wm=async(e,t)=>{let r=E({}),n=e.body,o=new rr({$metadata:L(e),...r});return W(o,e.body)};var Am=(e,t)=>{let r=new j(Lm);return r.cc(e,jm),e[Pe]!=null&&r.c(j.of(Um,e[Pe]).n(Pe)),r};var Tm=(e,t)=>{let r=new j($m);return e[Un]!=null&&r.c(j.of(Fm,e[Un]).n(Un)),e[dr]!=null&&r.c(Rm(e[dr],t).n(dr)),e[Pn]!=null&&r.c(Am(e[Pn],t).n(Pn)),r};var Rm=(e,t)=>{let r=new j(Hm);return e[Pe]!=null&&r.c(j.of(Ym,e[Pe]).n(Pe)),e[Ie]!=null&&r.c(j.of(Vm,e[Ie]).n(Ie)),r};var Bm=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>T(r)),Om=(e,t)=>{let r={};return e[xe]!=null&&(r[xe]=T(e[xe])),r},km=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>Om(r,t));var Im=(e,t)=>{let r={};return e[Ln]!=null&&(r[Ln]=T(e[Ln])),e[ut]!=null&&(r[ut]=q(st(e[ut]))),e[ke]!=null&&(r[ke]=T(e[ke])),e.ChecksumAlgorithm===""?r[yt]=[]:e[yt]!=null&&(r[yt]=Bm($t(e[yt]),t)),e[zn]!=null&&(r[zn]=Lt(e[zn])),e[Q]!=null&&(r[Q]=T(e[Q])),e[qn]!=null&&(r[qn]=Dm(e[qn],t)),e[jn]!=null&&(r[jn]=Nm(e[jn],t)),r},Pm=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>Im(r,t));var Dm=(e,t)=>{let r={};return e[Dn]!=null&&(r[Dn]=T(e[Dn])),e[Nn]!=null&&(r[Nn]=T(e[Nn])),r};var Nm=(e,t)=>{let r={};return e[vn]!=null&&(r[vn]=Y(e[vn])),e[Kn]!=null&&(r[Kn]=q(st(e[Kn]))),r};var L=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),vm=(e,t)=>we(e,t).then(r=>t.utf8Encoder(r)),R=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0);var _c="ACL";var Ec="AcceptRanges";var Mm="ArchiveStatus";var In="AccessTier";var Pn="Bucket";var nc="BypassGovernanceRetention",Lm="BucketInfo",ht="BucketKeyEnabled";var Fm="BucketLocationConstraint";var Um="BucketType";var yt="ChecksumAlgorithm";var $m="CreateBucketConfiguration",Gn="CacheControl",_r="ChecksumCRC32",Er="ChecksumCRC32C",Hn="ContentDisposition";var Vn="ContentEncoding";var Yn="ContentLanguage",mr="ContentLength",pc="ChecksumMode",qm="ContentMD5";var or="CommonPrefixes";var Km="ContentRange";var pr="ChecksumSHA1",Sr="ChecksumSHA256";var Wn="ContentType",ar="ContinuationToken";var sr="Contents";var cr="Delimiter";var Xn="DeleteMarker";var Dn="DisplayName",jm="DataRedundancy";var yr="Expires";var Ct="ExpectedBucketOwner";var Sc="ExpiresString";var ir="EncodingType",ke="ETag";var Qn="Expiration";var zm="FetchOwner";var wc="GrantFullControl";var Ac="GrantRead",Tc="GrantReadACP",Gm="GrantWrite",Rc="GrantWriteACP";var Nn="ID";var Bc="IfMatch",ur="IfModifiedSince",Oc="IfNoneMatch";var vn="IsRestoreInProgress";var Mn="IsTruncated";var hr="IfUnmodifiedSince";var Ln="Key",Fn="KeyCount";var dr="Location",Un="LocationConstraint";var Hm="LocationInfo",ut="LastModified",Vm="LocationNameAsString";var Ym="LocationType";var Wm="MFA";var lr="MaxKeys";var kc="MissingMeta";var Ie="Name";var $n="NextContinuationToken";var qn="Owner";var oc="ObjectLockEnabledForBucket";var Zn="ObjectLockLegalHoldStatus",Jn="ObjectLockMode";var br="ObjectLockRetainUntilDate";var Xm="ObjectOwnership",sc="OptionalObjectAttributes";var xe="Prefix";var Ic="PartsCount";var Pc="PartNumber";var Dc="Range";var _t="RequestCharged",Qm="ResponseCacheControl",Zm="ResponseContentDisposition",Jm="ResponseContentEncoding",ey="ResponseContentLanguage",ty="ResponseContentType";var ry="ResponseExpires",Kn="RestoreExpiryDate";var Et="RequestPayer";var Nc="ReplicationStatus",jn="RestoreStatus";var vc="Restore";var fr="StartAfter";var Q="StorageClass";var wr="ServerSideEncryption";var ve="SSECustomerAlgorithm",eo="SSECustomerKey",Me="SSECustomerKeyMD5";var Mc="SSEKMSEncryptionContext",Ar="SSEKMSKeyId";var zn="Size";var ny="Tagging";var oy="TagCount";var Pe="Type";var _e="VersionId";var to="WebsiteRedirectLocation";var Lc="accept-ranges";var ro="cache-control",no="content-disposition",oo="content-encoding",so="content-language",bt="content-length",sy="content-md5",ay="content-range",ao="content-type",cy="continuation-token";var iy="delimiter",gt="expires";var dy="encoding-type",co="etag",Fc="expiresstring",ly="fetch-owner";var Uc="if-match",$c="if-modified-since";var qc="if-none-match";var Kc="if-unmodified-since";var gr="last-modified",fy="location";var my="list-type";var yy="max-keys";var jc="partNumber";var uy="prefix";var zc="range",hy="response-cache-control",by="response-content-disposition",gy="response-content-encoding",xy="response-content-language",Cy="response-content-type",_y="response-expires";var Ey="start-after";var io="versionId",py='<?xml version="1.0" encoding="UTF-8"?>';var Gc="x-amz-acl";var Sy="x-amz-archive-status",wy="x-amz-bypass-governance-retention";var Ay="x-amz-bucket-object-lock-enabled";var Tr="x-amz-checksum-crc32",Rr="x-amz-checksum-crc32c",Hc="x-amz-checksum-mode";var Br="x-amz-checksum-sha1",Or="x-amz-checksum-sha256";var De="x-amz-delete-marker",lo="x-amz-expiration",pt="x-amz-expected-bucket-owner";var Vc="x-amz-grant-full-control",Yc="x-amz-grant-read",Wc="x-amz-grant-read-acp",Ty="x-amz-grant-write",Xc="x-amz-grant-write-acp",Ry="x-amz-mfa";var xr="x-amz-missing-meta";var Cr="x-amz-mp-parts-count";var fo="x-amz-object-lock-legal-hold",mo="x-amz-object-lock-mode",xt="x-amz-object-lock-retain-until-date",By="x-amz-object-ownership",Oy="x-amz-optional-object-attributes";var Qc="x-amz-restore",St="x-amz-request-charged";var wt="x-amz-request-payer";var Zc="x-amz-replication-status";var yo="x-amz-storage-class",ky="x-amz-sdk-checksum-algorithm";var kr="x-amz-server-side-encryption",Ir="x-amz-server-side-encryption-aws-kms-key-id",Ce="x-amz-server-side-encryption-bucket-key-enabled",Jc="x-amz-server-side-encryption-context",Le="x-amz-server-side-encryption-customer-algorithm",uo="x-amz-server-side-encryption-customer-key",Fe="x-amz-server-side-encryption-customer-key-md5",Iy="x-amz-tagging",ac="x-amz-tagging-count";var Pr="x-amz-version-id",ho="x-amz-website-redirect-location",bo="x-id",ei=(e,t)=>vm(e,t).then(r=>{if(r.length){let n=new cc.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(i,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o=n.parse(r),s="#text",a=Object.keys(o)[0],c=o[a];return c[s]&&(c[a]=c[s],delete c[s]),sn(c)}return{}}),Ue=async(e,t)=>{let r=await ei(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},$e=(e,t)=>{if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"};function Py(e){return t=>async r=>{let n={...r.input},o=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(let s of o){let a=n[s.target];if(a){let c;typeof a=="string"?/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(a)?c=e.base64Decoder(a):(c=e.utf8Decoder(a),n[s.target]=e.base64Encoder(c)):(c=ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a),n[s.target]=e.base64Encoder(c));let i=new e.md5;i.update(c),n[s.hash]=e.base64Encoder(await i.digest())}}return t({...r,input:n})}}var Dy={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},qe=e=>({applyToStack:t=>{t.add(Py(e),Dy)}});function Ny(e){return t=>async r=>{let{CreateBucketConfiguration:n}=r.input,o=await e.region();return!n?.LocationConstraint&&!n?.Location&&(r={...r,input:{...r.input,CreateBucketConfiguration:o==="us-east-1"?void 0:{LocationConstraint:o}}}),t(r)}}var vy={step:"initialize",tags:["LOCATION_CONSTRAINT","CREATE_BUCKET_CONFIGURATION"],name:"locationConstraintMiddleware",override:!0},ti=e=>({applyToStack:t=>{t.add(Ny(e),vy)}});var Dr=class extends k.classBuilder().ep({...M,UseS3ExpressControlEndpoint:{type:"staticContextParams",value:!0},DisableAccessPoints:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(t,r,n,o){return[N(n,this.serialize,this.deserialize),v(n,t.getEndpointParameterInstructions()),ti(n)]}).s("AmazonS3","CreateBucket",{}).n("S3Client","CreateBucketCommand").f(void 0,void 0).ser(ic).de(uc).build(){};var Nr=class extends k.classBuilder().ep({...M,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,o){return[N(n,this.serialize,this.deserialize),v(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","DeleteObject",{}).n("S3Client","DeleteObjectCommand").f(void 0,void 0).ser(dc).de(hc).build(){};var w;(function(e){e.MD5="MD5",e.CRC32="CRC32",e.CRC32C="CRC32C",e.SHA1="SHA1",e.SHA256="SHA256"})(w||(w={}));var ri;(function(e){e.HEADER="header",e.TRAILER="trailer"})(ri||(ri={}));var ni=w.MD5,oi=w.CRC32;var At=[w.CRC32,w.CRC32C,w.SHA1,w.SHA256],si=[w.CRC32,w.CRC32C,w.SHA1,w.SHA256];var ai=(e,{requestChecksumRequired:t,requestAlgorithmMember:r},n)=>{let o=n?oi:ni;if(!r||!e[r])return t?o:void 0;let s=e[r];if(!At.includes(s))throw new Error(`The checksum algorithm "${s}" is not supported by the client. Select one of ${At}.`);return s};var Ke=e=>e===w.MD5?"content-md5":`x-amz-checksum-${e.toLowerCase()}`;var ci=(e,t)=>{let r=e.toLowerCase();for(let n of Object.keys(t))if(r===n.toLowerCase())return!0;return!1};var je=e=>e!==void 0&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!fn(e);var Pi=pe(it()),Di=pe(_o());var Fr=(e,t)=>({[w.MD5]:t.md5,[w.CRC32]:Pi.AwsCrc32,[w.CRC32C]:Di.AwsCrc32c,[w.SHA1]:t.sha1,[w.SHA256]:t.sha256})[e];var Ur=(e,t)=>{let r=new e;return r.update(et(t||"")),r.digest()};var Ni={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},vi=(e,t)=>(r,n)=>async o=>{if(!O.isInstance(o.request))return r(o);let{request:s}=o,{body:a,headers:c}=s,{base64Encoder:i,streamHasher:d}=e,{input:y,requestChecksumRequired:l,requestAlgorithmMember:f}=t,u=ai(y,{requestChecksumRequired:l,requestAlgorithmMember:f},!!n.isS3ExpressBucket),m=a,b=c;if(u){let g=Ke(u),x=Fr(u,e);if(je(a)){let{getAwsChunkedEncodingStream:p,bodyLengthChecker:C}=e;m=p(a,{base64Encoder:i,bodyLengthChecker:C,checksumLocationName:g,checksumAlgorithmFn:x,streamHasher:d}),b={...c,"content-encoding":c["content-encoding"]?`${c["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":c["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":g},delete b["content-length"]}else if(!ci(g,c)){let p=await Ur(x,a);b={...c,[g]:i(p)}}}return await r({...o,request:{...s,headers:b,body:m}})};var $r=(e=[])=>{let t=[];for(let r of si)!e.includes(r)||!At.includes(r)||t.push(r);return t};var Mi=e=>{let t=e.lastIndexOf("-");if(t!==-1){let r=e.slice(t+1);if(!r.startsWith("0")){let n=parseInt(r,10);if(!isNaN(n)&&n>=1&&n<=1e4)return!0}}return!1};function Eo(e){return new Blob([e]).stream()}var Li=async(e,{streamHasher:t,checksumAlgorithmFn:r,base64Encoder:n})=>{let o=je(e)?t(r,e):Ur(r,e);return n(await o)};var Fi=async(e,{config:t,responseAlgorithms:r})=>{let n=$r(r),{body:o,headers:s}=e;for(let a of n){let c=Ke(a),i=s[c];if(i){let d=Fr(a,t),{streamHasher:y,base64Encoder:l}=t,f=await Li(o,{streamHasher:y,checksumAlgorithmFn:d,base64Encoder:l});if(f===i)break;throw new Error(`Checksum mismatch: expected "${f}" but received "${i}" in response header "${c}".`)}}};var Ui={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},$i=(e,t)=>(r,n)=>async o=>{if(!O.isInstance(o.request))return r(o);let s=o.input,a=await r(o),c=a.response,i,{requestValidationModeMember:d,responseAlgorithms:y}=t;if(d&&s[d]==="ENABLED"){let{clientName:l,commandName:f}=n;if(l==="S3Client"&&f==="GetObjectCommand"&&$r(y).every(b=>{let h=Ke(b),g=c.headers[h];return!g||Mi(g)}))return a;let m=je(c.body);m&&(i=await e.streamCollector(c.body),c.body=Eo(i)),await Fi(a.response,{config:e,responseAlgorithms:y}),m&&i&&(c.body=Eo(i))}return a};var qr=(e,t)=>({applyToStack:r=>{r.add(vi(e,t),Ni),r.addRelativeTo($i(e,t),Ui)}});var Kr=class extends k.classBuilder().ep({...M,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,o){return[N(n,this.serialize,this.deserialize),v(n,t.getEndpointParameterInstructions()),qe(n),qt(n),qr(n,{input:this.input,requestChecksumRequired:!1,requestValidationModeMember:"ChecksumMode",responseAlgorithms:["CRC32","CRC32C","SHA256","SHA1"]})]}).s("AmazonS3","GetObject",{}).n("S3Client","GetObjectCommand").f(xa,ga).ser(lc).de(bc).build(){};var Tt=class extends k.classBuilder().ep({...M,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,o){return[N(n,this.serialize,this.deserialize),v(n,t.getEndpointParameterInstructions()),qe(n),qt(n)]}).s("AmazonS3","HeadObject",{}).n("S3Client","HeadObjectCommand").f(_a,Ca).ser(fc).de(gc).build(){};var jr=class extends k.classBuilder().ep({...M,Bucket:{type:"contextParams",name:"Bucket"},Prefix:{type:"contextParams",name:"Prefix"}}).m(function(t,r,n,o){return[N(n,this.serialize,this.deserialize),v(n,t.getEndpointParameterInstructions())]}).s("AmazonS3","ListObjectsV2",{}).n("S3Client","ListObjectsV2Command").f(void 0,void 0).ser(mc).de(xc).build(){};var zr=class extends k.classBuilder().ep({...M,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(t,r,n,o){return[N(n,this.serialize,this.deserialize),v(n,t.getEndpointParameterInstructions()),bs(n),qe(n),qr(n,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1})]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").f(rc,tc).ser(yc).de(Cc).build(){};var Gr=class{has(t,r){return Promise.reject(new Error(".has is not implemented"))}put(t,r,n){return Promise.reject(new Error(".put is not implemented"))}async*putMany(t,r){for await(let{cid:n,block:o}of t)await this.put(n,o,r),yield n}get(t,r){return Promise.reject(new Error(".get is not implemented"))}async*getMany(t,r){for await(let n of t)yield{cid:n,block:await this.get(n,r)}}async delete(t,r){await Promise.reject(new Error(".delete is not implemented"))}async*deleteMany(t,r){for await(let n of t)await this.delete(n,r),yield n}async*getAll(t){throw new Error(".getAll is not implemented")}};var Rt=pe(ji(),1);function zi(e){return e=e??new Error("Open failed"),(0,Rt.default)(e,"ERR_OPEN_FAILED")}function Gi(e){return e=e??new Error("Put failed"),(0,Rt.default)(e,"ERR_PUT_FAILED")}function Hi(e){return e=e??new Error("Delete failed"),(0,Rt.default)(e,"ERR_DELETE_FAILED")}function Vi(e){return e=e??new Error("Not Found"),(0,Rt.default)(e,"ERR_NOT_FOUND")}function ie(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Bt(e=0){return globalThis.Buffer?.allocUnsafe!=null?ie(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Hr(e,t){if(globalThis.Buffer!=null)return ie(globalThis.Buffer.concat(e,t));t==null&&(t=e.reduce((o,s)=>o+s.length,0));let r=Bt(t),n=0;for(let o of e)r.set(o,n),n+=o.length;return ie(r)}function Gy(e){return e[Symbol.asyncIterator]!=null}function Hy(e){if(Gy(e))return(async()=>{let n=new Uint8Array(0);for await(let o of e)n=Hr([n,o],n.length+o.length);return n})();let t=[],r=0;for(let n of e)t.push(n),r+=n.byteLength;return Hr(t,r)}var Yi=Hy;var To={};P(To,{base10:()=>Zy});var PR=new Uint8Array(0);function Wi(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function Z(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function Xi(e){return new TextEncoder().encode(e)}function Qi(e){return new TextDecoder().decode(e)}function Vy(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=o}var c=e.length,i=e.charAt(0),d=Math.log(c)/Math.log(256),y=Math.log(256)/Math.log(c);function l(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var b=0,h=0,g=0,x=m.length;g!==x&&m[g]===0;)g++,b++;for(var p=(x-g)*y+1>>>0,C=new Uint8Array(p);g!==x;){for(var B=m[g],D=0,F=p-1;(B!==0||D<h)&&F!==-1;F--,D++)B+=256*C[F]>>>0,C[F]=B%c>>>0,B=B/c>>>0;if(B!==0)throw new Error("Non-zero carry");h=D,g++}for(var G=p-h;G!==p&&C[G]===0;)G++;for(var Dt=i.repeat(b);G<p;++G)Dt+=e.charAt(C[G]);return Dt}function f(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var b=0;if(m[b]!==" "){for(var h=0,g=0;m[b]===i;)h++,b++;for(var x=(m.length-b)*d+1>>>0,p=new Uint8Array(x);m[b];){var C=r[m.charCodeAt(b)];if(C===255)return;for(var B=0,D=x-1;(C!==0||B<g)&&D!==-1;D--,B++)C+=c*p[D]>>>0,p[D]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");g=B,b++}if(m[b]!==" "){for(var F=x-g;F!==x&&p[F]===0;)F++;for(var G=new Uint8Array(h+(x-F)),Dt=h;F!==x;)G[Dt++]=p[F++];return G}}}function u(m){var b=f(m);if(b)return b;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:f,decode:u}}var Yy=Vy,Wy=Yy,Ji=Wy;var po=class{name;prefix;baseEncode;constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},So=class{name;prefix;baseDecode;prefixCodePoint;constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return ed(this,t)}},wo=class{decoders;constructor(t){this.decoders=t}or(t){return ed(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n!=null)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function ed(e,t){return new wo({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}var Ao=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(t,r,n,o){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new po(t,r,n),this.decoder=new So(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};function Ge({name:e,prefix:t,encode:r,decode:n}){return new Ao(e,t,r,n)}function de({name:e,prefix:t,alphabet:r}){let{encode:n,decode:o}=Ji(r,e);return Ge({prefix:t,name:e,encode:n,decode:s=>Z(o(s))})}function Xy(e,t,r,n){let o={};for(let y=0;y<t.length;++y)o[t[y]]=y;let s=e.length;for(;e[s-1]==="=";)--s;let a=new Uint8Array(s*r/8|0),c=0,i=0,d=0;for(let y=0;y<s;++y){let l=o[e[y]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);i=i<<r|l,c+=r,c>=8&&(c-=8,a[d++]=255&i>>c)}if(c>=r||255&i<<8-c)throw new SyntaxError("Unexpected end of data");return a}function Qy(e,t,r){let n=t[t.length-1]==="=",o=(1<<r)-1,s="",a=0,c=0;for(let i=0;i<e.length;++i)for(c=c<<8|e[i],a+=8;a>r;)a-=r,s+=t[o&c>>a];if(a!==0&&(s+=t[o&c<<r-a]),n)for(;s.length*r&7;)s+="=";return s}function S({name:e,prefix:t,bitsPerChar:r,alphabet:n}){return Ge({prefix:t,name:e,encode(o){return Qy(o,n,r)},decode(o){return Xy(o,n,r,e)}})}var Zy=de({prefix:"9",name:"base10",alphabet:"0123456789"});var Ro={};P(Ro,{base16:()=>Jy,base16upper:()=>eu});var Jy=S({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),eu=S({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Bo={};P(Bo,{base2:()=>tu});var tu=S({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Oo={};P(Oo,{base256emoji:()=>au});var td=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),ru=td.reduce((e,t,r)=>(e[r]=t,e),[]),nu=td.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function ou(e){return e.reduce((t,r)=>(t+=ru[r],t),"")}function su(e){let t=[];for(let r of e){let n=nu[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}var au=Ge({prefix:"\u{1F680}",name:"base256emoji",encode:ou,decode:su});var Io={};P(Io,{base32:()=>He,base32hex:()=>du,base32hexpad:()=>fu,base32hexpadupper:()=>mu,base32hexupper:()=>lu,base32pad:()=>cu,base32padupper:()=>iu,base32upper:()=>ko,base32z:()=>yu});var He=S({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ko=S({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),cu=S({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),iu=S({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),du=S({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),lu=S({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),fu=S({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),mu=S({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),yu=S({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Po={};P(Po,{base36:()=>uu,base36upper:()=>hu});var uu=de({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),hu=de({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Do={};P(Do,{base58btc:()=>z,base58flickr:()=>bu});var z=de({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),bu=de({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var No={};P(No,{base64:()=>gu,base64pad:()=>xu,base64url:()=>Cu,base64urlpad:()=>_u});var gu=S({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),xu=S({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Cu=S({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),_u=S({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var vo={};P(vo,{base8:()=>Eu});var Eu=S({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Mo={};P(Mo,{identity:()=>pu});var pu=Ge({prefix:"\0",name:"identity",encode:e=>Qi(e),decode:e=>Xi(e)});var YR=new TextEncoder,WR=new TextDecoder;var Fo={};P(Fo,{identity:()=>Gu});var Au=od,rd=128,Tu=127,Ru=~Tu,Bu=Math.pow(2,31);function od(e,t,r){t=t||[],r=r||0;for(var n=r;e>=Bu;)t[r++]=e&255|rd,e/=128;for(;e&Ru;)t[r++]=e&255|rd,e>>>=7;return t[r]=e|0,od.bytes=r-n+1,t}var Ou=Lo,ku=128,nd=127;function Lo(e,n){var r=0,n=n||0,o=0,s=n,a,c=e.length;do{if(s>=c)throw Lo.bytes=0,new RangeError("Could not decode varint");a=e[s++],r+=o<28?(a&nd)<<o:(a&nd)*Math.pow(2,o),o+=7}while(a>=ku);return Lo.bytes=s-n,r}var Iu=Math.pow(2,7),Pu=Math.pow(2,14),Du=Math.pow(2,21),Nu=Math.pow(2,28),vu=Math.pow(2,35),Mu=Math.pow(2,42),Lu=Math.pow(2,49),Fu=Math.pow(2,56),Uu=Math.pow(2,63),$u=function(e){return e<Iu?1:e<Pu?2:e<Du?3:e<Nu?4:e<vu?5:e<Mu?6:e<Lu?7:e<Fu?8:e<Uu?9:10},qu={encode:Au,decode:Ou,encodingLength:$u},Ku=qu,Ot=Ku;function kt(e,t=0){return[Ot.decode(e,t),Ot.decode.bytes]}function Ve(e,t,r=0){return Ot.encode(e,t,r),t}function Ye(e){return Ot.encodingLength(e)}function Ee(e,t){let r=t.byteLength,n=Ye(e),o=n+Ye(r),s=new Uint8Array(o+r);return Ve(e,s,0),Ve(r,s,n),s.set(t,o),new We(e,r,t,s)}function sd(e){let t=Z(e),[r,n]=kt(t),[o,s]=kt(t.subarray(n)),a=t.subarray(n+s);if(a.byteLength!==o)throw new Error("Incorrect length");return new We(r,o,a,t)}function ad(e,t){if(e===t)return!0;{let r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&Wi(e.bytes,r.bytes)}}var We=class{code;size;digest;bytes;constructor(t,r,n,o){this.code=t,this.size=r,this.digest=n,this.bytes=o}};var cd=0,ju="identity",id=Z;function zu(e){return Ee(cd,id(e))}var Gu={code:cd,name:ju,encode:id,digest:zu};var qo={};P(qo,{sha256:()=>Hu,sha512:()=>Vu});function $o({name:e,code:t,encode:r}){return new Uo(e,t,r)}var Uo=class{name;code;encode;constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){let r=this.encode(t);return r instanceof Uint8Array?Ee(this.code,r):r.then(n=>Ee(this.code,n))}else throw Error("Unknown type, must be binary type")}};function ld(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}var Hu=$o({name:"sha2-256",code:18,encode:ld("SHA-256")}),Vu=$o({name:"sha2-512",code:19,encode:ld("SHA-512")});function fd(e,t){let{bytes:r,version:n}=e;switch(n){case 0:return Wu(r,Ko(e),t??z.encoder);default:return Xu(r,Ko(e),t??He.encoder)}}var md=new WeakMap;function Ko(e){let t=md.get(e);if(t==null){let r=new Map;return md.set(e,r),r}return t}var Xe=class e{code;version;multihash;bytes;"/";constructor(t,r,n,o){this.code=r,this.version=t,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:t,multihash:r}=this;if(t!==Pt)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Qu)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return e.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=Ee(t,r);return e.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return e.equals(this,t)}static equals(t,r){let n=r;return n!=null&&t.code===n.code&&t.version===n.version&&ad(t.multihash,n.multihash)}toString(t){return fd(this,t)}toJSON(){return{"/":fd(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;let r=t;if(r instanceof e)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:o,multihash:s,bytes:a}=r;return new e(n,o,s,a??yd(n,o,s.bytes))}else if(r[Zu]===!0){let{version:n,multihash:o,code:s}=r,a=sd(o);return e.create(n,s,a)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==Pt)throw new Error(`Version 0 CID must use dag-pb (code: ${Pt}) block encoding`);return new e(t,r,n,n.bytes)}case 1:{let o=yd(t,r,n.bytes);return new e(t,r,n,o)}default:throw new Error("Invalid version")}}static createV0(t){return e.create(0,Pt,t)}static createV1(t,r){return e.create(1,t,r)}static decode(t){let[r,n]=e.decodeFirst(t);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=e.inspectBytes(t),n=r.size-r.multihashSize,o=Z(t.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=o.subarray(r.multihashSize-r.digestSize),a=new We(r.multihashCode,r.digestSize,s,o);return[r.version===0?e.createV0(a):e.createV1(r.codec,a),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[l,f]=kt(t.subarray(r));return r+=f,l},o=n(),s=Pt;if(o===18?(o=0,r=0):s=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let a=r,c=n(),i=n(),d=r+i,y=d-a;return{version:o,codec:s,multihashCode:c,digestSize:i,multihashSize:y,size:d}}static parse(t,r){let[n,o]=Yu(t,r),s=e.decode(o);if(s.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Ko(s).set(n,t),s}};function Yu(e,t){switch(e[0]){case"Q":{let r=t??z;return[z.prefix,r.decode(`${z.prefix}${e}`)]}case z.prefix:{let r=t??z;return[z.prefix,r.decode(e)]}case He.prefix:{let r=t??He;return[He.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}}function Wu(e,t,r){let{prefix:n}=r;if(n!==z.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=t.get(n);if(o==null){let s=r.encode(e).slice(1);return t.set(n,s),s}else return o}function Xu(e,t,r){let{prefix:n}=r,o=t.get(n);if(o==null){let s=r.encode(e);return t.set(n,s),s}else return o}var Pt=112,Qu=18;function yd(e,t,r){let n=Ye(e),o=n+Ye(t),s=new Uint8Array(o+r.byteLength);return Ve(e,s,0),Ve(t,s,n),s.set(r,o),s}var Zu=Symbol.for("@ipld/js-cid/CID");var jo={...Mo,...Bo,...vo,...To,...Ro,...Io,...Po,...Do,...No,...Oo},bB={...qo,...Fo};function hd(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var ud=hd("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),zo=hd("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=Bt(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Ju={utf8:ud,"utf-8":ud,hex:jo.base16,latin1:zo,ascii:zo,binary:zo,...jo},Go=Ju;function Ho(e,t="utf8"){let r=Go[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ie(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}var Yr=class{extension;prefixLength;base;constructor(t={}){this.extension=t.extension??".data",this.prefixLength=t.prefixLength??2,this.base=t.base??ko}encode(t){let r=this.base.encoder.encode(t.multihash.bytes);return`${r.substring(r.length-this.prefixLength)}/${r}${this.extension}`}decode(t){let r=t.split("/").pop();if(r==null)throw new Error("Invalid path");return r.endsWith(this.extension)&&(r=r.substring(0,r.length-this.extension.length)),Xe.decode(this.base.decoder.decode(r))}};var Vo=class extends Gr{createIfMissing;s3;bucket;prefix;shardingStrategy;constructor(t,r,n){if(super(),t==null)throw new Error("An S3 instance must be supplied. See the blockstore-s3 README for examples.");if(r==null)throw new Error("An bucket must be supplied. See the blockstore-s3 README for examples.");this.s3=t,this.bucket=r,this.createIfMissing=n?.createIfMissing??!1,this.prefix=typeof n?.prefix=="string"?`${n.prefix}/`:null,this.shardingStrategy=n?.shardingStrategy??new Yr}async put(t,r,n){try{return await this.s3.send(new zr({Bucket:this.bucket,Key:`${this.prefix}${this.shardingStrategy.encode(t)}`,Body:r}),{abortSignal:n?.signal}),t}catch(o){throw Gi(o)}}async get(t,r){try{let n=await this.s3.send(new Kr({Bucket:this.bucket,Key:`${this.prefix}${this.shardingStrategy.encode(t)}`}),{abortSignal:r?.signal});if(n.Body==null)throw new Error("Response had no body");if(n.Body instanceof Uint8Array)return n.Body;if(typeof n.Body=="string")return Ho(n.Body);if(n.Body instanceof Blob){let o=await n.Body.arrayBuffer();return new Uint8Array(o,0,o.byteLength)}return await Yi(n.Body)}catch(n){throw n.statusCode===404?Vi(n):n}}async has(t,r){try{return await this.s3.send(new Tt({Bucket:this.bucket,Key:`${this.prefix}${this.shardingStrategy.encode(t)}`}),{abortSignal:r?.signal}),!0}catch(n){if(n.$metadata?.httpStatusCode===404||n.$metadata?.httpStatusCode===403)return!1;throw n}}async delete(t,r){try{await this.s3.send(new Nr({Bucket:this.bucket,Key:`${this.prefix}${this.shardingStrategy.encode(t)}`}),{abortSignal:r?.signal})}catch(n){throw Hi(n)}}async*getAll(t){let r={};try{for(;;){let n=await this.s3.send(new jr({Bucket:this.bucket,Prefix:this.prefix??void 0,...r}),{abortSignal:t?.signal});if(t?.signal?.aborted===!0)return;if(n==null||n.Contents==null)throw new Error("Not found");for(let o of n.Contents){if(o.Key==null)throw new Error("Not found");let s=this.shardingStrategy.decode(o.Key);yield{cid:s,block:await this.get(s,t)}}if(n.IsTruncated===!0){r.StartAfter=n.Contents[n.Contents.length-1].Key;continue}break}}catch(n){throw new Error(n.code)}}async open(t){try{await this.s3.send(new Tt({Bucket:this.bucket,Key:""}),{abortSignal:t?.signal})}catch(r){if(r.statusCode!==404){if(this.createIfMissing){await this.s3.send(new Dr({Bucket:this.bucket}),{abortSignal:t?.signal});return}throw zi(r)}}}};return Ed(eh);})();
/*! Bundled license information:

tslib/tslib.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

tslib/tslib.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
return BlockstoreS3}));
